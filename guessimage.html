<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>🖼️ لعبة اكشف الصورة</title>
  <link rel="stylesheet" href="style.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Amiri&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tmi.js/1.8.5/tmi.min.js"></script>
  <style>
    body {
      background-color: #111;
      color: #fff;
      font-family: 'Amiri', serif;
      text-align: center;
      padding: 20px;
    }
    h1 {
      color: #ff3333;
      margin-top: 10px;
    }
    .teams-container {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin: 20px auto;
      width: 90%;
      gap: 20px;
      flex-wrap: wrap;
    }
    .team {
      width: 20%;
      padding: 15px;
      border-radius: 15px;
      text-align: center;
    }
    .team-blue {
      background-color: rgba(0,0,255,0.1);
      border: 2px solid #0099ff;
    }
    .team-red {
      background-color: rgba(255,0,0,0.1);
      border: 2px solid #ff3333;
    }
    .players-list {
      background-color: #333;
      padding: 10px;
      border-radius: 8px;
      min-height: 50px;
      font-size: 18px;
      text-align: right;
    }
    .player-entry {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: 2px 0;
    }
    .player-entry button {
      background: #900;
      font-size: 14px;
      padding: 2px 6px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    .game-description {
      width: 50%;
      background-color: #222;
      border: 1px solid #555;
      border-radius: 10px;
      padding: 15px;
      font-size: 18px;
      line-height: 1.6;
    }
    .game-area {
      font-size: 24px;
      margin: 20px auto;
      background-color: #222;
      padding: 20px;
      border-radius: 15px;
      width: 90%;
      max-width: 1000px;
      border: 2px solid #ff3333;
      position: relative;
    }
    .image-container {
      position: relative;
      width: 100%;
      padding-top: 66.66%;
      margin: 10px 0;
      background: #000;
      border: 2px solid #444;
    }
    .image-container img {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .grid {
      position: absolute;
      top: 0;
      left: 0;
      display: grid;
      width: 100%;
      height: 100%;
      grid-template-columns: repeat(12, 1fr);
      grid-template-rows: repeat(6, 1fr);
    }
    .cell {
      background-color: #222;
      color: #fff;
      font-size: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: background-color 0.3s, color 0.3s;
    }
    .cell.revealed {
      background-color: transparent;
      color: transparent;
      cursor: default;
    }
    input, button {
      padding: 10px;
      font-size: 18px;
      margin: 5px;
      border-radius: 8px;
      border: none;
      font-family: 'Amiri', serif;
    }
    input.player-input {
      width: 100%;
      box-sizing: border-box;
    }
    button {
      background-color: #ff3333;
      color: #fff;
      cursor: pointer;
    }
    .current-player {
      font-size: 22px;
      margin: 10px 0;
      color: #00ffcc;
    }
    .errors-list {
      margin-top: 10px;
      background-color: #333;
      padding: 10px;
      border-radius: 8px;
      min-height: 40px;
      text-align: right;
    }
    .scoreboard {
      margin-top: 15px;
      font-size: 20px;
    }
    .answer-box {
      margin-top: 15px;
      font-size: 20px;
    }
  </style>
</head>
<body>

<h1>🖼️ لعبة اكشف الصورة</h1>

<div class="teams-container">
  <div class="team team-blue">
    <h3>🔵 الفريق الأزرق</h3>
    <input type="text" id="bluePlayerInput" class="player-input" placeholder="اسم اللاعب">
    <button onclick="addPlayer('blue')">➕ إضافة</button>
    <div id="bluePlayers" class="players-list"></div>
  </div>

  <div class="game-description">
    ✅ <strong>شرح اللعبة:</strong><br>
    ستظهر صورة مقسمة إلى مربعات.<br>
    اللاعب يختار رقم لفتح المربع ثم يكتب التخمين.<br>
    إذا كانت الإجابة صحيحة، تُفتح الصورة وتحسب نقاط بعدد المربعات الباقية.<br>
    أول فريق يصل إلى 150 نقطة يفوز 🏆.<br>
    يمكنك إخفاء/إظهار الإجابة بزر التحكم.
  </div>

  <div class="team team-red">
    <h3>🔴 الفريق الأحمر</h3>
    <input type="text" id="redPlayerInput" class="player-input" placeholder="اسم اللاعب">
    <button onclick="addPlayer('red')">➕ إضافة</button>
    <div id="redPlayers" class="players-list"></div>
  </div>
</div>

<div class="game-area">
  <button id="startButton" onclick="startGame()">🎮 ابدأ اللعبة</button>
  <div id="currentPlayer" class="current-player">⬇️ اللاعب الحالي سيظهر هنا</div>
  <div id="timer" style="color:#ff0;font-size:20px;"></div>

  <div class="image-container">
    <img id="gameImage" src="" alt="صورة اللعبة">
    <div class="grid" id="grid"></div>
  </div>
  <input type="text" id="guessInput" placeholder="اكتب التخمين هنا">
  <button onclick="submitGuess()">✅ تأكيد</button>
  <button onclick="nextTurn()">⏭️ التالي</button>
  <button id="nextImageButton" onclick="loadRandomImage()" style="display:none;">🖼️ الصورة التالية</button>
  <button onclick="toggleAnswer()">👁️ إخفاء/إظهار الإجابة</button>

  <div id="guessResult" class="errors-list"></div>

  <div class="scoreboard">
    🔵 الفريق الأزرق: <span id="blueScore">0</span> نقطة<br>
    🔴 الفريق الأحمر: <span id="redScore">0</span> نقطة
  </div>

  <div class="answer-box" id="answerBox">
    ⚠️ الإجابة: <span id="answerText">❓</span>
  </div>
</div>


<script>
const images = [
  { url: "https://i.postimg.cc/kXtCZXLX/F3-HFd-HW0-AEa1g7.jpg", answer: "رايد مشواح" },
  { url: "https://i.postimg.cc/rsty2vqv/hq720.jpg", answer: "شونق بونق" },
  { url: "https://i.postimg.cc/ydhxDMMc/Gb-TRa-Ng-Wg-AAd-ma.jpg", answer: "بندريتا" },
  { url: "https://i.postimg.cc/3J1XJCcf/Uf-JSd-QMW-400x400.jpg", answer: "كونان" },
  { url: "https://i.postimg.cc/G2zDhbM8/AAAABdf-Go9-D-Dve-XMM8-KK8-Kspcy-Jfgdsf-Uu-Nz4r-Fn-SVZ24-Gtq1g-BPI-v-UGRBn3q-SZc0-VQo-Jab-PCEctz-Mcp-ULKkw-zq5-Vs-ZFfv-UI.jpg", answer: "سبايدرمان" },
  { url: "https://i.postimg.cc/SQf4RJ7t/1831a0d7cfb3101098b4b986d1e43d07.jpg", answer: "ياسر مخ" },
  { url: "https://i.postimg.cc/W34GZDq6/4e381384cff59a012179eba0df30a717.jpg", answer: "فيصل يجي" },
  { url: "https://i.postimg.cc/hjJsXCY1/Minecraft-2024.jpg", answer: "ماين كرافت" },
  { url: "https://i.postimg.cc/W4cTWKGh/image.jpg", answer: "هيرو براين" },
  { url: "https://i.postimg.cc/JnG8GLmY/image.jpg", answer: "برج المملكة" },
  { url: "https://i.postimg.cc/8z5Z8PbY/259f0650-094e-11eb-8bfb-60e78dcd1af0.jpg", answer: "فول قايز" },
  { url: "https://i.postimg.cc/HWFMWWHK/intense-and-fearless-leon-s-kennedy-in-action-1wmdmawmnhjdpy5v-1024x575.jpg", answer: "ليون كينيدي" },
  { url: "https://i.postimg.cc/434Pv4YP/Zx-PLg-7-N-400x400.jpg", answer: "كراش" },
  { url: "https://i.postimg.cc/yx63tWzp/on-a-perfect-blue-sky.jpg", answer: "القدس" },
  { url: "https://i.postimg.cc/s2TTdyKG/2c86dea1b05c4f57ed7b3632898bf2ba.jpg", answer: "للي" },
  { url: "https://i.postimg.cc/7P9tS3Sn/3-89.jpg", answer: "مساعد الدوسري" },
  { url: "https://i.postimg.cc/02p4rTcr/598fbb0e2432fbc3c902803e7a120ac9.jpg", answer: "محمد اودين" },
  { url: "https://i.postimg.cc/xdSM8Zpj/91274f359d57cfc0f2460bfdcd7e1f1c.jpg", answer: "محمد المكسيكي" },
  { url: "https://i.postimg.cc/qqd2h5vx/144441917.jpg", answer: "كرستيانو رونالدو" },
  { url: "https://i.postimg.cc/KjvBDgt1/artworks-000230624217-ihfshc-t240x240.jpg", answer: "ابو حمدان" },
  { url: "https://i.postimg.cc/SsKcWM6J/channels4-profile.jpg", answer: "عزيز" },
  { url: "https://i.postimg.cc/RZX872yd/El9-Su-U3-Wo-AMZRYb.jpg", answer: "خلودي 25" },
  { url: "https://i.postimg.cc/BbzbPhsn/f3d1f3bc-f86e-4995-92e3-5311e61a0b7c.jpg", answer: "برج ايفل" },
  { url: "https://i.postimg.cc/PJ1Zhs1k/f7b391905842a05a643eedb1344ac102cf356788-00.jpg", answer: "مجرم قيمز" },
  { url: "https://i.postimg.cc/qRcrs1TG/GFu9-QT9-Xc-AAMggb.jpg", answer: "عادل" },
  { url: "https://i.postimg.cc/gk2DPrnz/images-1.jpg", answer: "صالح اوبلز" },
  { url: "https://i.postimg.cc/C5bLPbqF/images-2.jpg", answer: "ابو عمر" },
  { url: "https://i.postimg.cc/3wZqBNRP/images-2-jpg.jpg", answer: "دربحه" },
  { url: "https://i.postimg.cc/y8KxgpSv/images-3.jpg", answer: "خشب" },
  { url: "https://i.postimg.cc/FzZrjNSp/images-4.jpg", answer: "سعد سوبفكس" },
  { url: "https://i.postimg.cc/K8Z2n6cp/images-5.jpg", answer: "نويصر" },
  { url: "https://i.postimg.cc/KjHMnPBJ/images-6.jpg", answer: "توبز" },
  { url: "https://i.postimg.cc/8ztjWBGW/images.jpg", answer: "فواز" },
  { url: "https://i.postimg.cc/9fZKK1fw/p0d7n21l.jpg", answer: "كريم بنزيما" },
  { url: "https://i.postimg.cc/Jzvs73WQ/shutterstock-editorial-15379570v.jpg", answer: "ميسي" },
  { url: "https://i.postimg.cc/hGGRY6Yy/The-Great-Wall-of-China-at-Jinshanling-edit.jpg", answer: "سور الصين" },
  { url: "https://i.postimg.cc/QttNpHsM/image.jpg", answer: "البتراء" },
  { url: "https://i.postimg.cc/CLtv0tdr/image.jpg", answer: "برج خليفه" },
  { url: "https://i.postimg.cc/Gh8p98h3/image.jpg", answer: "الاهرامات" },
  { url: "https://i.postimg.cc/G2zhZv3r/image.jpg", answer: "مودي الاسمر" }
];

let remainingImages = [...images];
const bluePlayers = [];
const redPlayers = [];
let turnIndex = 0;
let currentTeam = 'blue';
let answeringTeam = 'blue';
let currentAnswer = "";
let blueScore = 0;
let redScore = 0;
let timerInterval = null;
let currentPlayerName = "";
let answerVisible = true;

function toggleAnswer() {
  answerVisible = !answerVisible;
  document.getElementById("answerBox").style.display = answerVisible ? "block" : "none";
}

function createGrid() {
  const grid = document.getElementById("grid");
  grid.innerHTML = "";
  for (let i = 0; i < 72; i++) {
    const cell = document.createElement("div");
    cell.className = "cell";
    cell.textContent = i + 1;
    cell.onclick = () => {
      cell.classList.add("revealed");
      cell.onclick = null;
      startTimer();
    };
    grid.appendChild(cell);
  }
}

function addPlayer(team) {
  const inputId = team === 'blue' ? "bluePlayerInput" : "redPlayerInput";
  const name = document.getElementById(inputId).value.trim();
  if (name === "") return alert("❌ الرجاء كتابة اسم اللاعب");
  if (team === 'blue') bluePlayers.push(name);
  else redPlayers.push(name);
  updatePlayerList(team);
  document.getElementById(inputId).value = "";
}

function updatePlayerList(team) {
  const listId = team === 'blue' ? "bluePlayers" : "redPlayers";
  const players = team === 'blue' ? bluePlayers : redPlayers;
  document.getElementById(listId).innerHTML = players
    .map((player, i) => `
      <div class="player-entry">
        <span>• ${player}</span>
        <button onclick="removePlayer('${team}', ${i})">🗑️</button>
      </div>
    `).join("");
}

function removePlayer(team, index) {
  if (team === 'blue') bluePlayers.splice(index, 1);
  else redPlayers.splice(index, 1);
  updatePlayerList(team);
}

function startGame() {
  document.getElementById("startButton").style.display = "none";
  loadRandomImage();
  nextTurn();
}

function loadRandomImage() {
  if (remainingImages.length === 0) {
    alert("✅ انتهت كل الصور!");
    return;
  }
  const index = Math.floor(Math.random() * remainingImages.length);
  const selectedImage = remainingImages[index];
  remainingImages.splice(index, 1);

  document.getElementById("gameImage").src = selectedImage.url;
  currentAnswer = selectedImage.answer;
  document.getElementById("answerText").innerText = currentAnswer;
  document.getElementById("nextImageButton").style.display = "none";
  createGrid();
  document.getElementById("guessResult").innerText = "";
}

function nextTurn() {
  clearInterval(timerInterval);
  document.getElementById("timer").innerText = "";
  if (bluePlayers.length === 0 || redPlayers.length === 0) {
    alert("❌ الرجاء إضافة لاعبين في كلا الفريقين.");
    return;
  }
  let player;
  if (currentTeam === 'blue') {
    player = bluePlayers[turnIndex % bluePlayers.length];
    answeringTeam = 'blue';
    currentTeam = 'red';
  } else {
    player = redPlayers[turnIndex % redPlayers.length];
    answeringTeam = 'red';
    currentTeam = 'blue';
    turnIndex++;
  }
  currentPlayerName = player;
  document.getElementById("currentPlayer").innerText = `🎮 الدور الآن: ${player}`;
  document.getElementById("answerText").innerText = currentAnswer;
  document.getElementById("guessInput").value = "";
  document.getElementById("guessResult").innerText = "";
}

function submitGuess() {
  const guess = document.getElementById("guessInput").value.trim();
  if (guess === "") {
    alert("❌ الرجاء كتابة تخمين.");
    return;
  }
  const resultDiv = document.getElementById("guessResult");
  if (guess === currentAnswer) {
    resultDiv.innerHTML += `✅ إجابة صحيحة!<br>`;
    clearInterval(timerInterval);
    const remainingCells = Array.from(document.querySelectorAll(".cell")).filter(c => !c.classList.contains("revealed")).length;
    document.querySelectorAll(".cell").forEach(cell => {
      cell.classList.add("revealed");
    });
    document.getElementById("nextImageButton").style.display = "inline-block";
    if (answeringTeam === 'red') {
      redScore += remainingCells;
      document.getElementById("redScore").innerText = redScore;
      if (redScore >= 150) alert("🏆 الفريق الأحمر فاز!");
    } else {
      blueScore += remainingCells;
      document.getElementById("blueScore").innerText = blueScore;
      if (blueScore >= 150) alert("🏆 الفريق الأزرق فاز!");
    }
  } else {
    resultDiv.innerHTML += `❌ خطأ: ${guess}<br>`;
  }
  document.getElementById("guessInput").value = "";
}

function startTimer() {
  clearInterval(timerInterval);
  let timeLeft = 30;
  document.getElementById("timer").innerText = `⏳ الوقت المتبقي: ${timeLeft} ثانية`;
  timerInterval = setInterval(() => {
    timeLeft--;
    document.getElementById("timer").innerText = `⏳ الوقت المتبقي: ${timeLeft} ثانية`;
    if (timeLeft <= 0) {
      clearInterval(timerInterval);
      document.getElementById("timer").innerText = "⏳ انتهى الوقت!";
    }
  }, 1000);
}

window.onload = () => {
  createGrid();
};
</script>

</body>
</html>
