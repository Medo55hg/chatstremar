<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>ğŸ¯ ØªØ±ÙƒÙŠØ¨ Ø§Ù„ÙƒÙ„Ù…Ø§Øª</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/tmi.js@1.8.5/dist/tmi.min.js"></script>
  <script src="tmi.min.js"></script>
  <style>
    :root{
      --bg:#111; --panel:#1b1b1b; --line:#333; --red:#ff3333; --blue:#0099ff;
      --ok:#27ae60; --warn:#f1c40f; --muted:#aaa;
    }
    *{box-sizing:border-box}
    body{background:var(--bg);color:#fff;font-family:'Cairo',sans-serif;text-align:center;padding:16px}
    h1{color:var(--red);margin:8px 0 12px}
    .wrap{max-width:1200px;margin:0 auto}
    .teams-container{display:flex;justify-content:center;align-items:stretch;gap:16px;flex-wrap:wrap;margin:16px auto}
    .team{width:280px;min-width:260px;padding:14px;border-radius:14px;text-align:right;background:#0b0f2e;border:2px solid var(--blue)}
    .team-red{background:#2e0b0b;border-color:var(--red)}
    .team h3{margin:0 0 8px}
    .players-list{background:#222;padding:10px;border-radius:8px;min-height:56px;font-size:16px}
    .player-entry{display:flex;justify-content:space-between;align-items:center;margin:2px 0}
    .player-input{width:100%;padding:10px;font-size:15px;margin:8px 0;border-radius:8px;border:1px solid var(--line);background:#2a2a2a;color:#ddd;text-align:center}
    .btn{padding:10px 14px;font-size:15px;background:#444;color:#fff;border:none;border-radius:8px;cursor:pointer}
    .btn:hover{background:#555}
    .add-btn{background:#cc0000}.add-btn span{color:#00ccff;font-weight:700;margin:0 4px}
    .desc{flex:1;min-width:300px;max-width:520px;background:#181818;border:1px solid #444;border-radius:12px;padding:16px;line-height:1.9}
    .desc strong{color:#00ff99}.commands-highlight{color:var(--red);font-weight:700;margin-top:8px;display:block}
    .blue{color:var(--blue)}.red{color:#ff5555}
    .score-table{width:100%;margin-top:10px;border-collapse:collapse;font-size:15px}
    .score-table th,.score-table td{padding:8px;border:1px solid #333;text-align:center}
    .score-table th{background:#252525}
    .score-table tr:nth-child(even){background:#1c1c1c}
    .admin{background:#121212;border:1px solid #333;border-radius:12px;padding:12px;margin:10px auto;display:grid;gap:8px;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));text-align:right}
    .admin label{font-size:13px;color:#ddd}
    .admin input,.admin select{width:100%;padding:8px;border-radius:8px;border:1px solid #333;background:#1f1f1f;color:#eee}
    .admin .switch{display:flex;gap:8px;align-items:center}
    .admin .switch input{width:auto}
    .game-box{margin-top:16px;max-width:900px;margin-inline:auto;border-radius:15px;padding:18px;border:2px solid #333;background:#141414;transition:box-shadow .2s}
    .team-turn-blue{box-shadow:0 0 0 3px rgba(0,153,255,.35)}
    .team-turn-red{box-shadow:0 0 0 3px rgba(255,51,51,.35)}
    .info{display:flex;flex-wrap:wrap;gap:10px;align-items:center;justify-content:space-between;margin-bottom:8px}
    .badge{padding:6px 10px;border-radius:10px;background:#1f1f1f;border:1px solid #2c2c2c}
    #timer{color:var(--warn);font-weight:700}
    .controls{display:flex;flex-wrap:wrap;gap:8px;justify-content:center;margin:10px 0}
    .letters{display:grid;grid-template-columns:repeat(auto-fit,minmax(48px,1fr));gap:8px;max-width:620px;margin:10px auto}
    .letter{height:56px;border-radius:12px;background:#1a1a1a;border:2px solid #333;color:#fff;display:flex;align-items:center;justify-content:center;font-weight:800;font-size:22px}
    .letter-used{background:var(--ok)!important;border-color:#1e8449!important;color:#fff}
    .words-wrap{display:grid;grid-template-columns:1fr 1fr;gap:10px;max-width:820px;margin:14px auto}
    .panel{background:#1a1a1a;border:1px solid #333;border-radius:10px;padding:10px;text-align:right}
    .panel h4{margin:0 0 6px}
    .muted{color:var(--muted)}
    .flex{display:flex;gap:8px;align-items:center}
    .mini{font-size:13px}
    .pill{padding:4px 8px;border-radius:999px;background:#222;border:1px solid #333}
    .players-contrib{max-height:180px;overflow:auto}
    .copy-area{width:100%;min-height:68px;background:#121212;color:#ddd;border:1px solid #333;border-radius:8px;padding:8px}
    @media (max-width:640px){
      .words-wrap{grid-template-columns:1fr}
      .team{width:100%}
      .letters{max-width:100%}
    }
  </style>
</head>
<body>
<div class="wrap">
  <h1>ğŸ¯ ØªØ±ÙƒÙŠØ¨ Ø§Ù„ÙƒÙ„Ù…Ø§Øª</h1>

  <div class="teams-container">
    <div class="team">
      <h3>ğŸ”µ Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£Ø²Ø±Ù‚</h3>
      <input type="text" id="bluePlayerInput" class="player-input" placeholder="Ø§Ø³Ù… Ø§Ù„Ù„Ø§Ø¹Ø¨">
      <div class="flex">
        <button class="btn add-btn" onclick="addPlayerFromInput('blue')"><span>+</span>Ø¥Ø¶Ø§ÙØ©</button>
        <button class="btn" onclick="quickJoin('blue')">Ø§Ù†Ø¶Ù…Ø§Ù… (Ø£Ù†Ø§)</button>
      </div>
      <div id="bluePlayers" class="players-list"></div>
    </div>

    <div class="desc">
      âœ… <strong>Ø´Ø±Ø­ Ø§Ù„Ù„Ø¹Ø¨Ø©:</strong><br>
      Ø³ØªØ¸Ù‡Ø± Ù…Ø¬Ù…ÙˆØ¹Ø© Ù…Ù† Ø§Ù„Ø­Ø±ÙˆÙ ÙÙŠ Ù…Ù†ØªØµÙ Ø§Ù„Ø´Ø§Ø´Ø©. Ø¹Ù„Ù‰ Ø§Ù„ÙØ±ÙŠÙ‚ ØªØ±ÙƒÙŠØ¨ Ø£ÙƒØ¨Ø± Ø¹Ø¯Ø¯ Ù…Ù…ÙƒÙ† Ù…Ù† Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ø© Ø®Ù„Ø§Ù„ Ø§Ù„Ø²Ù…Ù† Ø§Ù„Ù…Ø­Ø¯Ø¯. ÙƒÙ„ ÙƒÙ„Ù…Ø© = 1 Ù†Ù‚Ø·Ø© ğŸ†
      <span class="commands-highlight">
        ğŸ“„ Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ø´Ø§Øª: <span class="blue">!Ø§Ø²Ø±Ù‚</span> Ù„Ù„Ø§Ù†Ø¶Ù…Ø§Ù… Ù„Ù„Ø£Ø²Ø±Ù‚ â€” <span class="red">!Ø§Ø­Ù…Ø±</span> Ù„Ù„Ø§Ù†Ø¶Ù…Ø§Ù… Ù„Ù„Ø£Ø­Ù…Ø±
      </span>
      <table class="score-table">
        <thead><tr><th>Ø§Ù„Ø¬ÙˆÙ„Ø©</th><th>Ø§Ù„Ø£Ø²Ø±Ù‚</th><th>Ø§Ù„Ø£Ø­Ù…Ø±</th></tr></thead>
        <tbody id="scoreTableBody"></tbody>
        <tfoot><tr><th>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</th><th id="blueTotalScore">0</th><th id="redTotalScore">0</th></tr></tfoot>
      </table>
    </div>

    <div class="team team-red">
      <h3>ğŸ”´ Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£Ø­Ù…Ø±</h3>
      <input type="text" id="redPlayerInput" class="player-input" placeholder="Ø§Ø³Ù… Ø§Ù„Ù„Ø§Ø¹Ø¨">
      <div class="flex">
        <button class="btn add-btn" onclick="addPlayerFromInput('red')"><span>+</span>Ø¥Ø¶Ø§ÙØ©</button>
        <button class="btn" onclick="quickJoin('red')">Ø§Ù†Ø¶Ù…Ø§Ù… (Ø£Ù†Ø§)</button>
      </div>
      <div id="redPlayers" class="players-list"></div>
    </div>
  </div>

  <!-- Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø¶ÙŠÙ -->
  <div class="admin">
    <div>
      <label>â± Ù…Ø¯Ø© Ø§Ù„Ø¬ÙˆÙ„Ø© (Ø«ÙˆØ§Ù†Ù)</label>
      <input type="number" id="optDuration" min="30" step="10" value="300">
    </div>
    <div>
      <label>ğŸ”¢ Ø¹Ø¯Ø¯ ÙƒÙ„Ù…Ø§Øª Ø§Ù„ÙØ¦Ø© (2 - 12)</label>
      <input type="number" id="optWordCount" min="2" max="12" value="7">
    </div>
    <div>
      <label>ğŸ“‚ Ø§Ø®ØªØ± ÙØ¦Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
      <select id="optCategory"></select>
    </div>
    <div class="switch">
      <input type="checkbox" id="optAllowAny">
      <label for="optAllowAny">Ù‚Ø¨ÙˆÙ„ Ø£ÙŠ ÙƒÙ„Ù…Ø© Ù…Ù† Ø§Ù„Ø­Ø±ÙˆÙ (Ø¨Ø¯ÙˆÙ† Ù‚Ø§Ù…ÙˆØ³ Ø§Ù„Ø¬ÙˆÙ„Ø©)</label>
    </div>
    <div>
      <label>ğŸš« ØªØ¨Ø§Ø·Ø¤ Ø§Ù„Ù„Ø§Ø¹Ø¨ (Ø«ÙˆØ§Ù†Ù Ø¨ÙŠÙ† Ø±Ø³Ø§Ù„ØªÙŠÙ†)</label>
      <input type="number" id="optCooldown" min="0" value="1">
    </div>
    <div>
      <label>ğŸ® Ø§Ù„Ù…Ù†ØµØ©</label>
      <select id="platformSelect">
        <option value="twitch">Twitch</option>
        <option value="kick">Kick</option>
      </select>
    </div>
    <div>
      <label>ğŸ“º Ø§Ø³Ù… Ø§Ù„Ù‚Ù†Ø§Ø©</label>
      <input type="text" id="channelInput" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ù‚Ù†Ø§Ø©">
    </div>
    <div class="flex">
      <button class="btn" onclick="connectChat()">âœ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
      <span id="chatStatus" class="mini pill muted">ØºÙŠØ± Ù…ØªØµÙ„</span>
    </div>
    <div class="flex">
      <button class="btn" onclick="startRound()">ğŸ® Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¬ÙˆÙ„Ø©</button>
      <button class="btn" onclick="pauseResume()"><span id="pauseLbl">â¸ï¸ Ø¥ÙŠÙ‚Ø§Ù Ù…Ø¤Ù‚Øª</span></button>
      <button class="btn" onclick="endRound()">â¹ï¸ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø¬ÙˆÙ„Ø©</button>
      <button class="btn" onclick="resetGame()">ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø·</button>
    </div>
  </div>

  <div id="gameBox" class="game-box">
    <div class="info">
      <div class="badge" id="category">Ø§Ù„ÙØ¦Ø©: ...</div>
      <div class="badge" id="timer">Ø§Ù„ÙˆÙ‚Øª: 5:00</div>
      <div class="badge" id="currentTeam">Ø§Ù„Ø¯ÙˆØ±: Ù„Ø§ Ø£Ø­Ø¯</div>
      <div class="badge" id="pointsInfo"></div>
    </div>

    <div class="letters" id="letters"></div>

    <div class="words-wrap">
      <div class="panel">
        <h4>âœ… Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…ÙƒØªØ´ÙØ©</h4>
        <div id="wordsFound" class="mini" style="line-height:1.9"></div>
      </div>
      <div class="panel">
        <h4>ğŸ“‹ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„ÙØ§Ø¦ØªØ©</h4>
        <div id="missedWords" class="mini muted" style="line-height:1.9"></div>
      </div>
    </div>

    <div class="panel">
      <h4>ğŸ‘¥ Ù…Ø³Ø§Ù‡Ù…Ø§Øª Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†</h4>
      <div class="players-contrib" id="playersContrib"></div>
      <div class="flex" style="margin-top:8px;flex-wrap:wrap">
        <button class="btn" onclick="copySummary()">ğŸ“„ Ù†Ø³Ø® Ù…Ù„Ø®Øµ Ø§Ù„Ø¬ÙˆÙ„Ø©</button>
        <textarea id="summaryText" class="copy-area" placeholder="Ø³ÙŠØ¸Ù‡Ø± Ø§Ù„Ù…Ù„Ø®Øµ Ù‡Ù†Ø§ Ù„Ù„Ù†Ø³Ø®â€¦"></textarea>
      </div>
    </div>
  </div>

  <div style="margin-top:20px" class="panel">
    <h4>ğŸ”Œ ØªÙˆØ¬ÙŠÙ‡Ø§Øª Ø³Ø±ÙŠØ¹Ø©</h4>
    <div class="mini muted">
      â€¢ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙˆÙ† ÙŠÙ†Ø¶Ù…ÙˆÙ† Ø¹Ø¨Ø± Ø§Ù„Ø´Ø§Øª (!Ø§Ø²Ø±Ù‚ / !Ø§Ø­Ù…Ø±) Ø£Ùˆ Ù…Ù† Ø§Ù„Ø£Ø²Ø±Ø§Ø± ÙÙŠ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©.<br>
      â€¢ Ø¹Ù†Ø¯ ØªÙØ¹ÙŠÙ„ â€œÙ‚Ø¨ÙˆÙ„ Ø£ÙŠ ÙƒÙ„Ù…Ø©â€ØŒ ØªÙØ­ØªØ³Ø¨ Ø£ÙŠ ÙƒÙ„Ù…Ø© Ù…ÙƒÙˆÙ‘Ù†Ø© Ù…Ù† Ø§Ù„Ø­Ø±ÙˆÙ Ø§Ù„Ù…Ø¹Ø±ÙˆØ¶Ø© (Ø¨Ø¯ÙˆÙ† Ù‚Ø§Ù…ÙˆØ³ Ø§Ù„Ø¬ÙˆÙ„Ø©).<br>
      â€¢ ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙˆØ§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­.
    </div>
  </div>
</div>

<script>
/* =========================
   Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø¹Ø§Ù…Ø©
   ========================= */
let bluePlayers = JSON.parse(localStorage.getItem('tk_blue')) || [];
let redPlayers  = JSON.parse(localStorage.getItem('tk_red'))  || [];
let currentTeam = '';
let currentTeamIndex = 0;

let roundWords = [];
let roundLetters = [];
let availableLetters = [];
let foundWords = [];
let playersScore = {}; // { username: number }
let playerLastMsgTs = {}; // anti-spam

let roundTimer = null;
let roundPaused = false;
let roundEndsAt = 0; // timestamp
let duration = Number(localStorage.getItem('tk_duration')) || 300;
let wordCount = Number(localStorage.getItem('tk_wordcount')) || 7;
let allowAny = JSON.parse(localStorage.getItem('tk_any')) || false;
let cooldownSec = Number(localStorage.getItem('tk_cooldown')) || 1;

let roundScores = JSON.parse(localStorage.getItem('tk_scores')) || [];
let currentRound = roundScores.length ? Math.max(...roundScores.map(r=>r.round))+1 : 1;

let chatClient = null;
let kickSocket = null;

const allCategories = {
  "Ø­ÙŠÙˆØ§Ù†Ø§Øª": [
    "Ø£Ø³Ø¯", "Ù†Ù…Ø±", "ÙÙ‡Ø¯", "Ø°Ø¦Ø¨", "Ø¯Ø¨", 
    "Ø²Ø±Ø§ÙØ©", "ÙÙŠÙ„", "ØºÙˆØ±ÙŠÙ„Ø§", "Ø´Ù…Ø¨Ø§Ù†Ø²ÙŠ", "ÙƒÙ†ØºØ±",
    "ÙƒÙˆØ§Ù„Ø§", "Ø¨Ø§Ù†Ø¯Ø§", "Ø«Ø¹Ù„Ø¨", "Ø±Ø§ÙƒÙˆÙ†", "Ø­ØµØ§Ù†",
    "Ø¨Ù‚Ø±Ø©", "Ø®Ø±ÙˆÙ", "Ù…Ø§Ø¹Ø²", "Ø¬Ù…Ù„", "ØºØ²Ø§Ù„",
    "Ù†Ø³Ø±", "ØµÙ‚Ø±", "Ø¨ÙˆÙ…Ø©", "Ø¨Ø¨ØºØ§Ø¡", "Ù†Ø¹Ø§Ù…Ø©",
    "Ø¨Ø·Ø±ÙŠÙ‚", "Ù†Ù‚Ø§Ø± Ø§Ù„Ø®Ø´Ø¨", "Ø·Ø§ÙˆÙˆØ³", "Ø¯Ø¬Ø§Ø¬Ø©", "Ø¨Ø·Ø©",
    "Ø¥ÙˆØ²Ø©", "Ø­Ù…Ø§Ù…Ø©", "Ø¨Ù„Ø¨Ù„", "Ø¹ØµÙÙˆØ±", "ØºØ±Ø§Ø¨",
    "ØªÙ…Ø³Ø§Ø­", "Ø³Ù„Ø­ÙØ§Ø©", "Ø³Ø­Ù„ÙŠØ©", "Ø­Ø±Ø¨Ø§Ø¡", "Ø£ÙØ¹Ù‰",
    "Ø«Ø¹Ø¨Ø§Ù†", "ØªÙ†ÙŠÙ† ÙƒÙˆÙ…ÙˆØ¯Ùˆ", "Ø¶Ø¨", "Ø³Ù‚Ù†Ù‚ÙˆØ±", "ØªÙˆØ§ØªØ§Ø±Ø§",
    "Ø¶ÙØ¯Ø¹", "Ø¹Ù„Ø¬ÙˆÙ…", "Ø³Ù…Ù†Ø¯Ù„", "Ø¶ÙØ¯Ø¹ Ø§Ù„Ø´Ø¬Ø±", "Ù†ÙŠÙˆØª",
    "Ù‚Ø±Ø´", "Ø¯Ù„ÙÙŠÙ†", "Ø­ÙˆØª", "ØªÙˆÙ†Ø©", "Ø³Ù„Ù…ÙˆÙ†",
    "Ù†Ø¬Ù… Ø§Ù„Ø¨Ø­Ø±", "Ù‚Ù†Ø¯ÙŠÙ„ Ø§Ù„Ø¨Ø­Ø±", "ÙØ±Ø³ Ø§Ù„Ø¨Ø­Ø±", "Ø´ÙÙ†ÙŠÙ†", "Ø³Ù…ÙƒØ© Ø§Ù„Ø¨ÙŠØ±Ø§Ù†Ø§",
    "Ù†Ø­Ù„Ø©", "ÙØ±Ø§Ø´Ø©", "Ù†Ù…Ù„Ø©", "Ø¬Ø±Ø§Ø¯Ø©", "Ø¹Ù†ÙƒØ¨ÙˆØª",
    "Ø¹Ù‚Ø±Ø¨", "Ø¯Ø¨ÙˆØ±", "Ø°Ø¨Ø§Ø¨Ø©", "Ø¨Ø¹ÙˆØ¶Ø©", "Ø®Ù†ÙØ³Ø§Ø¡",
    "Ø³Ø±Ø¹ÙˆÙ", "ØµØ±ØµÙˆØ±", "Ø¨Ù‚ Ø§Ù„ÙØ±Ø§Ø´", "Ø¯ÙˆØ¯Ø© Ø§Ù„Ù‚Ø²", "ÙŠØ±Ù‚Ø©",
    "Ø£Ø®Ø·Ø¨ÙˆØ·", "Ø­Ø¨Ø§Ø±", "Ø³Ø±Ø·Ø§Ù† Ø§Ù„Ø¨Ø­Ø±", "Ø¬Ø±Ø§Ø¯ Ø§Ù„Ø¨Ø­Ø±", "Ù‚Ù†ÙØ° Ø§Ù„Ø¨Ø­Ø±",
    "Ø®ÙŠØ§Ø± Ø§Ù„Ø¨Ø­Ø±", "Ù…Ø­Ø§Ø±", "Ø­Ù„Ø²ÙˆÙ† Ø§Ù„Ø¨Ø­Ø±", "Ø¥Ø³ÙÙ†Ø¬ Ø¨Ø­Ø±ÙŠ", "Ù…Ø±Ø¬Ø§Ù†",
    "Ø®ÙØ§Ø´", "Ù‚Ù†Ø¯Ø³", "Ù‚Ù†ÙØ°", "Ø®Ù„Ø¯", "ÙØ£Ø±",
    "Ø¬Ø±Ø°", "Ø³Ù†Ø¬Ø§Ø¨", "Ø£Ø±Ù†Ø¨", "Ù‡Ø§Ù…Ø³ØªØ±", "Ø¸Ø¨ÙŠ",
    "ÙˆØ­ÙŠØ¯ Ø§Ù„Ù‚Ø±Ù†", "ÙØ±Ø³ Ø§Ù„Ù†Ù‡Ø±", "Ø¬Ø§Ù…ÙˆØ³", "Ø¨Ø§Ù†ØºÙˆÙ„ÙŠÙ†", "Ø¢ÙƒÙ„ Ø§Ù„Ù†Ù…Ù„"
],
  
  "ÙÙˆØ§ÙƒÙ‡ ÙˆØ®Ø¶Ø±ÙˆØ§Øª":  [
        "ØªÙØ§Ø­", "Ù…ÙˆØ²", "Ø¨Ø±ØªÙ‚Ø§Ù„", "ÙØ±Ø§ÙˆÙ„Ø©", "Ø¹Ù†Ø¨", "Ù…Ø§Ù†Ø¬Ùˆ", "Ø£Ù†Ø§Ù†Ø§Ø³", "Ø¨Ø·ÙŠØ®", "Ø´Ù…Ø§Ù…", "Ø®ÙˆØ®",
        "Ù…Ø´Ù…Ø´", "ÙƒÙ…Ø«Ø±Ù‰", "Ø¬ÙˆØ§ÙØ©", "ØªÙŠÙ†", "Ø±Ù…Ø§Ù†", "ÙƒÙŠÙˆÙŠ", "Ù„ÙŠÙ…ÙˆÙ†", "Ø¬Ø±ÙŠØ¨ ÙØ±ÙˆØª", "ØªÙˆØª Ø£Ø³ÙˆØ¯", "ØªÙˆØª Ø£Ø²Ø±Ù‚",
        "ØªÙˆØª Ø¨Ø±ÙŠ", "ÙƒØ±Ø²", "ØªÙ…Ø±", "Ø¨Ø§Ø¨Ø§ÙŠØ§", "Ø¬Ø§Ùƒ ÙØ±ÙˆØª", "Ø¯Ø±Ø§Ù‚", "Ù†ÙƒØªØ§Ø±ÙŠÙ†", "Ù…Ø§Ø±Ø§ÙƒÙˆÙŠØ§", "Ù„ÙŠØªØ´ÙŠ", "Ù„ÙˆÙ†Ø¬Ø§Ù†",
        "ÙƒØ±Ø§Ù…Ø¨ÙˆÙ„Ø§", "Ø³Ø§Ø¨ÙˆØªØ§", "ØªÙŠÙ† Ø´ÙˆÙƒÙŠ", "Ù…Ø§Ù†ØºÙˆØ³ØªÙŠÙ†", "Ø¨ÙˆÙ…ÙŠÙ„Ùˆ", "ÙŠÙˆØ³ÙÙŠ", "Ø³ÙØ±Ø¬Ù„", "Ø²Ø¹Ø±ÙˆØ±", "Ø¹Ù†Ø§Ø¨", "Ø£ÙƒÙŠ",
        "ØªØ§Ù…Ø§Ø±ÙŠÙ„Ùˆ", "ÙØ§ÙƒÙ‡Ø© Ø§Ù„ØªÙ†ÙŠÙ†", "ÙƒØ§ÙƒØ§", "Ø³ÙŠØ±ÙŠÙ…ÙˆÙŠØ§", "ÙÙŠØ¬ÙˆØ§", "Ø³Ø§Ø¨ÙˆØª Ø§Ù„Ø£Ø³ÙˆØ¯", "ÙƒØ§Ø±Ø§Ù…Ø¨ÙˆÙ„Ø§", "ÙØ§ÙƒÙ‡Ø© Ø§Ù„Ù‚Ø´Ø·Ø©", "ÙƒÙˆØ¨ÙˆØ§Ø³Ùˆ", "ÙØ§ÙƒÙ‡Ø© Ø§Ù„Ù„ÙŠØªØ´ÙŠ"
        , "Ø®ÙŠØ§Ø±", "Ø¬Ø²Ø±", "Ø¨ØµÙ„", "Ø«ÙˆÙ…", "Ø¨Ø·Ø§Ø·Ø³", "Ø¨Ø·Ø§Ø·Ø§ Ø­Ù„ÙˆØ©", "ÙÙ„ÙÙ„ Ø­Ù„Ùˆ", "ÙÙ„ÙÙ„ Ø­Ø§Ø±", "Ø¨Ø§Ø°Ù†Ø¬Ø§Ù†",
        "ÙƒÙˆØ³Ø§", "Ù‚Ø±Ø¹", "Ø´Ù…Ù†Ø¯Ø±", "Ù…Ù„ÙÙˆÙ", "Ø¨Ø±ÙˆÙƒÙ„ÙŠ", "Ù‚Ø±Ù†Ø¨ÙŠØ·", "Ø³Ø¨Ø§Ù†Ø®", "Ø®Ø³", "ÙƒØ±ÙØ³", "Ø¬Ø±Ø¬ÙŠØ±",
        "Ø¨Ù‚Ø¯ÙˆÙ†Ø³", "ÙƒØ²Ø¨Ø±Ø©", "Ù†Ø¹Ù†Ø§Ø¹", "Ø²Ù†Ø¬Ø¨ÙŠÙ„", "ÙƒØ±ÙƒÙ…", "ÙØ§ØµÙˆÙ„ÙŠØ§ Ø®Ø¶Ø±Ø§Ø¡", "Ø¨Ø§Ø²Ù„Ø§Ø¡", "Ø°Ø±Ø©", "ÙØ·Ø±", "Ø²ÙŠØªÙˆÙ†",
        "Ù‡Ù„ÙŠÙˆÙ†", "Ø´Ù…Ø±", "Ø¨Ø§Ù…ÙŠØ©", "Ø±Ø§Ø¯ÙŠØ´ÙŠÙˆ", "ÙƒØ±Ø§Ø«", "Ø³Ù„Ù‚", "Ø¬Ø°ÙˆØ± Ø§Ù„Ù„ÙˆØªØ³", "ÙØ¬Ù„", "Ù„ÙØª", "ÙƒØ±Ù†Ø¨",
        "ÙƒØ±Ù†Ø¨ Ø¨Ø±ÙˆÙƒØ³ÙŠÙ„", "Ø´Ù…Ø§Ù… Ù…Ø±", "Ø®Ø±Ø´ÙˆÙ", "Ø¨Ø·Ø§Ø·Ø§ Ø£Ø±Ø¬ÙˆØ§Ù†ÙŠØ©", "Ø¬Ø°Ø± Ø§Ù„Ø´Ù…Ù†Ø¯Ø±", "ÙƒØ§Ø³Ø§ÙØ§", "ÙŠØ§Ù…", "Ø±ÙˆÙƒØ§", "ÙƒÙŠÙ„", "Ù…ÙŠÙƒØ±ÙˆØºØ±ÙŠÙ†"
    ],
  
  " Ù…Ø¯Ù† Ø¹Ø±Ø¨ÙŠØ©": [
    "Ø§Ù„Ø±ÙŠØ§Ø¶", "Ø¬Ø¯Ø©", "Ù…ÙƒØ© Ø§Ù„Ù…ÙƒØ±Ù…Ø©", "Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ù…Ù†ÙˆØ±Ø©", "Ø§Ù„Ø¯Ù…Ø§Ù…", "Ø§Ù„Ø®Ø¨Ø±", "Ø§Ù„Ø·Ø§Ø¦Ù", "ØªØ¨ÙˆÙƒ", "Ø£Ø¨Ù‡Ø§", "Ù†Ø¬Ø±Ø§Ù†",
    "Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©", "Ø§Ù„Ø¥Ø³ÙƒÙ†Ø¯Ø±ÙŠØ©", "Ø§Ù„Ø¬ÙŠØ²Ø©", "Ø´Ø±Ù… Ø§Ù„Ø´ÙŠØ®", "Ø§Ù„Ø£Ù‚ØµØ±", "Ø£Ø³ÙˆØ§Ù†", "Ø¨ÙˆØ±Ø³Ø¹ÙŠØ¯", "Ø§Ù„Ø³ÙˆÙŠØ³", "Ø§Ù„Ù…Ù†ØµÙˆØ±Ø©", "Ø·Ù†Ø·Ø§",
    "Ø¨ØºØ¯Ø§Ø¯", "Ø§Ù„Ø¨ØµØ±Ø©", "Ø§Ù„Ù…ÙˆØµÙ„", "Ø£Ø±Ø¨ÙŠÙ„", "Ø§Ù„Ù†Ø¬Ù", "ÙƒØ±Ø¨Ù„Ø§Ø¡", "Ø§Ù„Ø³Ù„ÙŠÙ…Ø§Ù†ÙŠØ©", "Ø§Ù„Ù†Ø§ØµØ±ÙŠØ©", "Ø§Ù„Ø¹Ù…Ø§Ø±Ø©", "Ø§Ù„Ø¯ÙŠÙˆØ§Ù†ÙŠØ©",
    "Ø§Ù„Ø±Ø¨Ø§Ø·", "Ø§Ù„Ø¯Ø§Ø± Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡", "Ù…Ø±Ø§ÙƒØ´", "ÙØ§Ø³", "Ø·Ù†Ø¬Ø©", "Ø£ÙƒØ§Ø¯ÙŠØ±", "Ù…ÙƒÙ†Ø§Ø³", "ÙˆØ¬Ø¯Ø©", "ØªØ·ÙˆØ§Ù†", "Ø§Ù„Ø¹ÙŠÙˆÙ†",
    "Ø§Ù„Ø¬Ø²Ø§Ø¦Ø± Ø§Ù„Ø¹Ø§ØµÙ…Ø©", "ÙˆÙ‡Ø±Ø§Ù†", "Ù‚Ø³Ù†Ø·ÙŠÙ†Ø©", "Ø¹Ù†Ø§Ø¨Ø©", "Ø¨Ø§ØªÙ†Ø©", "Ø¨Ø³ÙƒØ±Ø©", "ØªÙ„Ù…Ø³Ø§Ù†", "Ø³Ø·ÙŠÙ", "Ø§Ù„Ø¬Ù„ÙØ©", "Ø³ÙƒÙŠÙƒØ¯Ø©",
    "Ø£Ø¨ÙˆØ¸Ø¨ÙŠ", "Ø¯Ø¨ÙŠ", "Ø§Ù„Ø´Ø§Ø±Ù‚Ø©", "Ø¹Ø¬Ù…Ø§Ù†", "Ø±Ø£Ø³ Ø§Ù„Ø®ÙŠÙ…Ø©", "Ø§Ù„ÙØ¬ÙŠØ±Ø©", "Ø§Ù„Ø¹ÙŠÙ†", "Ø¯Ø¨Ø§ Ø§Ù„Ø­ØµÙ†", "Ø®ÙˆØ±ÙÙƒØ§Ù†", "Ø£Ù… Ø§Ù„Ù‚ÙŠÙˆÙŠÙ†",
    "Ø§Ù„ÙƒÙˆÙŠØª Ø§Ù„Ø¹Ø§ØµÙ…Ø©", "Ø§Ù„Ø£Ø­Ù…Ø¯ÙŠ", "Ø­ÙˆÙ„ÙŠ", "Ø§Ù„ÙØ±ÙˆØ§Ù†ÙŠØ©", "Ø§Ù„Ø¬Ù‡Ø±Ø§Ø¡", "Ù…Ø¨Ø§Ø±Ùƒ Ø§Ù„ÙƒØ¨ÙŠØ±", "Ø§Ù„Ø¹Ø¯Ø§Ù†", "Ø§Ù„Ø±Ù‚Ø©", "Ø§Ù„Ø¬Ù„ÙŠØ¹Ø©", "Ø§Ù„ØµÙ„ÙŠØ¨ÙŠØ©",
    "Ø§Ù„Ø¯ÙˆØ­Ø©", "Ø§Ù„Ø±ÙŠØ§Ù†", "Ø£Ù… ØµÙ„Ø§Ù„", "Ø§Ù„Ø®ÙˆØ±", "Ø§Ù„ÙˆÙƒØ±Ø©", "Ø¯Ø®Ø§Ù†", "Ø§Ù„Ø´Ù…Ø§Ù„", "Ø§Ù„Ø²Ø¨Ø§Ø±Ø©", "Ù…Ø³ÙŠØ¹ÙŠØ¯", "Ø§Ù„Ø±ÙˆÙŠØ³",
    "Ù…Ø³Ù‚Ø·", "ØµÙ„Ø§Ù„Ø©", "Ù†Ø²ÙˆÙ‰", "ØµØ­Ø§Ø±", "ØµÙˆØ±", "Ø¹Ø¨Ø±ÙŠ", "Ø§Ù„Ø±Ø³ØªØ§Ù‚", "Ø§Ù„Ø¨Ø±ÙŠÙ…ÙŠ", "Ø§Ù„Ø³ÙŠØ¨", "Ø®ØµØ¨",
    "Ø¹Ù…Ø§Ù†", "Ø§Ù„Ø²Ø±Ù‚Ø§Ø¡", "Ø¥Ø±Ø¨Ø¯", "Ø§Ù„Ø¹Ù‚Ø¨Ø©", "Ù…Ø§Ø¯Ø¨Ø§", "Ø§Ù„Ø³Ù„Ø·", "Ø§Ù„ÙƒØ±Ùƒ", "Ù…Ø¹Ø§Ù†", "Ø§Ù„Ø·ÙÙŠÙ„Ø©", "Ø¬Ø±Ø´"
],
  
  " Ø¹ÙˆØ§ØµÙ…": [
    "Ø£Ø¨Ùˆ Ø¸Ø¨ÙŠ", "Ø£ÙƒØ±Ø§", "Ø£Ù…Ø³ØªØ±Ø¯Ø§Ù…", "Ø£Ù†Ù‚Ø±Ø©", "Ø£ÙˆØ³Ù„Ùˆ",
    "Ø£ÙˆØªØ§ÙˆØ§", "Ø£Ø«ÙŠÙ†Ø§", "Ø£Ø³ØªØ§Ù†Ø§", "Ø£Ø´ØºØ¨Ø§Ø¯", "Ø¨ØºØ¯Ø§Ø¯",
    "Ø¨Ø§ÙƒÙˆ", "Ø¨Ø§Ù†ÙƒÙˆÙƒ", "Ø¨Ø±Ù„ÙŠÙ†", "Ø¨Ø±Ù†", "Ø¨Ø±Ø§Øº",
    "Ø¨Ø±Ø§Ø²ÙŠÙ„ÙŠØ§", "Ø¨Ø±ÙˆÙƒØ³Ù„", "Ø¨ÙˆØ®Ø§Ø±Ø³Øª", "Ø¨ÙˆØ¯Ø§Ø¨Ø³Øª", "Ø¨ÙˆÙŠÙ†Ø³ Ø¢ÙŠØ±Ø³",
    "Ø¨ÙŠØ¬ÙŠÙ†", "Ø¨ÙŠÙ„ØºØ±Ø§Ø¯", "Ø¨ÙˆØ±ØªÙˆ Ù†ÙˆÙÙˆ", "Ø¨Ø±Ø§ØªÙŠØ³Ù„Ø§ÙØ§", "Ø¨Ù„ØºØ±Ø§Ø¯",
    "Ø¨Ù†Ù…Ø§ Ø³ÙŠØªÙŠ", "Ø¨ÙƒÙŠÙ†", "ØªØ§Ù„ÙŠÙ†", "ØªÙŠØ±Ø§Ù†Ø§", "Ø·ÙˆÙƒÙŠÙˆ",
    "ØªÙˆÙ†Ø³", "ØªØ§ÙŠØ¨ÙŠ", "Ø·Ù‡Ø±Ø§Ù†", "ØªÙŠØ¬ÙˆØ§Ù†Ø§", "Ø¬Ø§ÙƒØ§Ø±ØªØ§",
    "Ø¬Ù†ÙŠÙ", "Ø¬ÙˆØ¨Ø§", "Ø¬ÙŠØ¨ÙˆØªÙŠ", "Ø¯Ø§ÙƒØ§Ø±", "Ø¯Ù…Ø´Ù‚",
    "Ø¯Ø¨ÙŠ", "Ø¯ÙˆØ´Ù†Ø¨Ù‡", "Ø¯ÙŠÙ„ÙŠ", "Ø¯ÙƒØ§Ø±", "Ø¯Ø¨Ù„Ù†",
    "Ø¯Ù‡ÙˆÙƒ", "Ø±ÙˆÙ…Ø§", "Ø±ÙŠÙŠÙƒØ§", "Ø±ÙŠØºØ§", "Ø±ÙŠØ§Ø¶",
    "Ø²ØºØ±Ø¨", "Ø³Ø§Ø±Ø§ÙŠÙŠÙÙˆ", "Ø³ØªÙˆÙƒÙ‡ÙˆÙ„Ù…", "Ø³ÙˆÙ„", "Ø³ÙŠÙˆÙ„",
    "Ø³Ù†ØºØ§ÙÙˆØ±Ø©", "Ø³ÙˆÙÙŠØ§", "Ø³Ø§Ù†ØªÙŠØ§ØºÙˆ", "Ø³Ø§Ù† Ø³Ù„ÙØ§Ø¯ÙˆØ±", "Ø³Ø§Ù†ØªØ§ ÙÙŠ",
    "Ø³Ø§Ù†Øª Ø¨Ø·Ø±Ø³Ø¨Ø±Øº", "Ø³Ø§Ùˆ Ø¨Ø§ÙˆÙ„Ùˆ", "ØµÙˆÙÙŠØ§", "Ø·Ø´Ù‚Ù†Ø¯", "Ø¹Ù…Ø§Ù†",
    "ØºØ§Ø¨ÙˆØ±ÙˆÙ†", "ØºÙŠØªØºØ§", "ÙØ§Ø¯ÙˆØ²", "ÙØ§Ù„ÙŠØªØ§", "ÙÙŠÙ„Ù†ÙŠÙˆØ³",
    "ÙÙŠÙŠÙ†Ø§", "Ù‚Ø§Ø¨Ø³", "Ù‚Ø·Ø±", "ÙƒØ§Ø¨ÙˆÙ„", "ÙƒÙˆØ§Ù„Ø§Ù„Ù…Ø¨ÙˆØ±",
    "ÙƒÙˆØ¨Ù†Ù‡Ø§ØºÙ†", "ÙƒÙŠØ¬Ø§Ù„ÙŠ", "ÙƒÙŠÙŠÙ", "ÙƒÙŠÙ†Ø´Ø§Ø³Ø§", "Ù„Ø´Ø¨ÙˆÙ†Ø©",
    "Ù„Ù†Ø¯Ù†", "Ù„ÙˆØ³Ø§ÙƒØ§", "Ù„ÙŠÙ…Ø§", "Ù„ÙŠÙˆØ¨Ù„ÙŠØ§Ù†Ø§", "Ù„ÙˆØ§Ù†Ø¯Ø§",
    "Ù„ÙˆÙƒØ³Ù…Ø¨ÙˆØ±Øº", "Ù…Ø§Ø¨ÙˆØªÙˆ", "Ù…Ø¯Ø±ÙŠØ¯", "Ù…Ù‚Ø¯ÙŠØ´Ùˆ", "Ù…Ù†Ø±ÙˆÙÙŠØ§",
    "Ù…Ù†Ø§Ù…Ø©", "Ù…ÙˆØ³ÙƒÙˆ", "Ù…ÙƒØ³ÙŠÙƒÙˆ Ø³ÙŠØªÙŠ", "Ù†ÙŠØ±ÙˆØ¨ÙŠ", "Ù†ÙŠØ§Ù…ÙŠ",
    "Ù†ÙŠÙˆØ¯Ù„Ù‡ÙŠ", "Ù†ÙŠÙˆÙŠÙˆØ±Ùƒ", "Ù‡Ø§ÙØ§Ù†Ø§", "Ù‡Ù„Ø³Ù†ÙƒÙŠ", "Ù‡ÙˆÙ†ÙˆÙ„ÙˆÙ„Ùˆ",
    "ÙˆØ§Ø±Ø³Ùˆ", "ÙˆØ§Ø´Ù†Ø·Ù†", "ÙˆÙŠÙ„ÙŠÙ†ØºØªÙˆÙ†", "ÙŠØ§ÙˆÙ†Ø¯ÙŠ", "ÙŠØ±ÙŠÙØ§Ù†"
],

  "Ù…Ø§Ø±ÙƒØ§Øª Ù…Ù„Ø§Ø¨Ø³": [
    "Ù†Ø§ÙŠÙƒÙŠ", "Ø£Ø¯ÙŠØ¯Ø§Ø³", "Ø¨ÙˆÙ…Ø§", "Ø¬ÙˆØªØ´ÙŠ", "Ø´Ø§Ù†ÙŠÙ„",
    "Ù„ÙˆÙŠØ³ ÙÙˆÙŠØªÙˆÙ†", "Ø¨Ø±Ø§Ø¯Ø§", "ÙÙŠØ±Ø³Ø§ØªØ´ÙŠ", "Ø¨Ø§Ù„ÙŠÙ†Ø³ÙŠØ§ØºØ§", "ÙƒØ§Ù„ÙÙ† ÙƒÙ„Ø§ÙŠÙ†",
    "Ø±Ø§Ù„Ù Ù„ÙˆØ±ÙŠÙ†", "Ù„Ø§ÙƒÙˆØ³Øª", "Ø¨Ø±Ø¨Ø±ÙŠ", "ØªÙˆÙ…ÙŠ Ù‡ÙŠÙ„ÙÙŠØºØ±", "Ø¯ÙŠÙˆØ±",
    "Ù…Ø§ÙŠÙƒÙ„ ÙƒÙˆØ±Ø²", "ÙƒÙŠÙ†Ø²Ùˆ", "Ø£Ù„ÙƒØ³Ù†Ø¯Ø± Ù…Ø§ÙƒÙˆÙŠÙ†", "Ø£ÙˆÙ ÙˆØ§ÙŠØª", "ÙÙŠÙ„Ø§",
    "Ø£Ù†Ø¯Ø± Ø¢Ø±Ù…Ø±", "Ù„ÙˆÙ„Ù„ÙŠÙ…Ù†", "Ø±ÙŠØ¨ÙˆÙƒ", "Ø³ÙˆØ¨Ø±ÙŠÙ…", "Ø³ØªÙˆØ³ÙŠ",
    "Ù„ÙŠÙØ§ÙŠØ²", "Ø¯ÙŠØ²Ù„", "Ø£Ø±Ù…Ø§Ù†ÙŠ", "Ù‡ÙˆØ¬Ùˆ Ø¨ÙˆØ³", "Ø²Ø§Ø±Ø§",
    "Ø¥ØªØ´ Ø¢Ù†Ø¯ Ø¥Ù…", "ÙŠÙˆÙ†ÙŠÙƒÙ„Ùˆ", "ØºØ§Ø¨", "Ø£ÙˆÙ„Ø¯ Ù†Ø§ÙÙŠ", "Ø¨Ø§Ù†Ø§Ù†Ø§ Ø±ÙŠØ¨Ø§Ø¨Ù„ÙŠÙƒ",
    "Ù‡ÙˆÙ„Ø³ØªØ±", "ÙÙˆØ±ÙŠÙØ± 21", "Ø£Ù…Ø¨Ø±Ùˆ", "Ø¨ÙˆÙ„ Ø£Ù†Ø¯ Ø¨ÙŠØ±", "Ø£Ù…ÙŠØ±ÙŠÙƒØ§Ù† Ø¥ÙŠØ¬Ù„",
    "Ù‡ÙˆÙ„Ø§Ù†Ø¯", "Ø³ÙˆØ¨Ø± Ø¯Ø±Ø§ÙŠ", "ÙƒØ§Ø±Ù‡Ø§Ø±Øª", "Ø°Ø§ Ù†ÙˆØ±Ø« ÙÙŠØ³", "Ø¨Ø§ØªØ§ØºÙˆÙ†ÙŠØ§",
    "Ø³ØªÙˆÙ† Ø¢ÙŠÙ„Ø§Ù†Ø¯", "ÙÙŠÙƒØªÙˆØ±ÙŠØ§ Ø³ÙŠÙƒØ±ÙŠØª", "ÙˆØ§Ø±Ø¨ÙŠ Ø¨Ø§Ø±ÙƒØ±", "Ø£Ù„ÙŠÙ† Ø£Ù†Ø¯Ø±Ùˆ", "Ø¨Ø±ÙˆÙƒØ³ Ø¨Ø±Ø§Ø°Ø±Ø²"
],
  
 " Ø§Ø³Ù…Ø§Ø¡ Ø§ÙˆÙ„Ø§Ø¯": [
    "Ù…Ø­Ù…Ø¯", "Ø£Ø­Ù…Ø¯", "Ø¹Ù„ÙŠ", "Ø¹Ù…Ø±", "Ø®Ø§Ù„Ø¯",
    "Ù…Ø­Ù…ÙˆØ¯", "ÙŠÙˆØ³Ù", "Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ…", "Ù…ØµØ·ÙÙ‰", "Ø­Ø³Ù†",
    "Ø­Ø³ÙŠÙ†", "Ø£ÙŠÙ…Ù†", "Ø£Ù…ÙŠØ±", "Ø¨Ø§Ø³Ù„", "Ø¬Ù…Ø§Ù„",
    "Ø±Ø§Ù…ÙŠ", "Ø³Ø§Ù…ÙŠ", "Ø·Ø§Ø±Ù‚", "ÙˆØ³Ø§Ù…", "ÙŠØ§Ø³ÙŠÙ†",
    "Ø£Ù†Ø³", "Ø¨Ø¯Ø±", "ØªØ§Ù…Ø±", "Ø«Ø§Ø¦Ø±", "Ø¬Ù„Ø§Ù„",
    "Ø®Ù„ÙŠÙ„", "Ø±Ø§Ø´Ø¯", "Ø³Ø¹ÙŠØ¯", "Ø´Ø§Ø¯ÙŠ", "ØµÙ„Ø§Ø­",
    "Ø¹Ø¨Ø¯ Ø§Ù„Ù„Ù‡", "Ø¹Ø«Ù…Ø§Ù†", "ÙØ§Ø±Ø³", "ÙƒØ±ÙŠÙ…", "Ù„Ø¤ÙŠ",
    "Ù…Ø§Ø²Ù†", "Ù†Ø¨ÙŠÙ„", "Ù‡Ø§Ø´Ù…", "ÙˆØ§Ø¦Ù„", "ÙŠØ­ÙŠÙ‰",
    "Ø²ÙŠØ§Ø¯", "Ø³Ø§Ù„Ù…", "Ø´Ø±ÙŠÙ", "Ø¹Ø¯Ù†Ø§Ù†", "ÙÙ‡Ø¯",
    "Ù…Ø§Ø¬Ø¯", "Ù†Ø§ØµØ±", "Ù‡Ø§Ù†ÙŠ", "ÙˆÙ„ÙŠØ¯", "ÙŠÙˆÙ†Ø³",
    "Ø£Ø³Ø§Ù…Ø©", "Ø¨ÙƒØ±", "ØªÙˆÙÙŠÙ‚", "Ø­Ø§Ø²Ù…", "Ø®Ø¶Ø±",
    "Ø±Ø§Ø¦Ø¯", "Ø³Ù„Ù…Ø§Ù†", "Ø´Ø§ÙƒØ±", "Ø¹Ø¨Ø¯ Ø§Ù„Ø±Ø­Ù…Ù†", "ÙØ§Ø¯ÙŠ",
    "Ù…Ø±ÙˆØ§Ù†", "Ù†ÙˆØ±", "Ù‡Ø§Ø¯ÙŠ", "ÙˆØ¬Ø¯ÙŠ", "ÙŠØ§Ø³Ù…ÙŠÙ†",
    "Ø£ÙƒØ±Ù…", "Ø¨Ø´ÙŠØ±", "ØªÙ…Ø§Ù…", "Ø­Ø³Ø§Ù…", "Ø®Ù„Ù",
    "Ø±Ø§Ù…Ø²", "Ø³Ø¹Ø¯", "Ø´Ù‡Ø§Ø¨", "Ø¹Ø¨Ø¯ Ø§Ù„Ø¹Ø²ÙŠØ²", "ÙØ§Ø±ÙˆÙ‚",
    "Ù…Ø´Ø¹Ù„", "Ù†Ø¨ÙŠÙ„", "Ù‡ÙŠØ«Ù…", "ÙˆØ³ÙŠÙ…", "ÙŠØ§ÙØ§",
    "Ø£Ø¯Ù‡Ù…", "Ø¨Ù„Ø§Ù„", "ØªÙ‚ÙŠ", "Ø­Ù…Ø¯", "Ø®Ø§Ù„Ø¯",
    "Ø±Ø§ÙØ¹", "Ø³ÙÙŠØ§Ù†", "Ø´ÙˆÙ‚ÙŠ", "Ø¹Ø¨Ø¯ Ø§Ù„ÙƒØ±ÙŠÙ…", "ÙÙˆØ²ÙŠ",
    "Ù…Ø¹Ø§Ø°", "Ù†Ø§Ø¯Ø±", "Ù‡Ù„Ø§Ù„", "ÙˆØ§ØµÙ", "ÙŠØ§Ø³Ø±"
],

 " Ø§Ø³Ù…Ø§Ø¡ Ø¨Ù†Ø§Øª": [
    "ÙØ§Ø·Ù…Ø©", "Ø®Ø¯ÙŠØ¬Ø©", "Ø¹Ø§Ø¦Ø´Ø©", "Ù…Ø±ÙŠÙ…", "Ø³Ø§Ø±Ø©", "Ø¢Ù…Ù†Ø©", "Ø²ÙŠÙ†Ø¨", "Ù‡Ø§Ø¬Ø±", "Ù†ÙˆØ±", "Ù„ÙŠÙ„Ù‰",
    "ØªØ§Ù„Ø§", "ÙŠØ§Ø±Ø§", "Ù„ÙˆÙ†Ø§", "Ø¬Ù†Ù‰", "Ù…ÙŠØ§Ø±", "Ø±Ø§Ù…Ø§", "Ù„ÙŠÙ†", "Ù…ÙŠØ³", "Ø±ÙŠÙ†Ø§Ø¯", "Ø¯Ø§Ù†Ø§",
    "Ø±ÙŠØ­Ø§Ù†Ø©", "ÙŠØ§Ø³Ù…ÙŠÙ†", "Ø²Ù‡Ø±Ø©", "ØºØ§Ø¯Ø©", "ÙˆØ±Ø¯", "Ù†Ø±Ø¬Ø³", "Ø³Ù†Ø¯Ø³", "ÙƒØ§Ø¯ÙŠ", "Ø³Ù„Ø³Ø¨ÙŠÙ„", "Ø£Ø²Ù‡Ø§Ø±",
    "Ø£Ù…Ù„", "Ø¥ÙŠÙ…Ø§Ù†", "ØªÙ‚ÙˆÙ‰", "Ù‡Ø¯Ù‰", "ØµÙØ§Ø¡", "ÙˆÙØ§Ø¡", "Ø±Ø­Ù…Ø©", "Ø¥Ø­Ø³Ø§Ù†", "Ù†Ù‡Ù‰", "Ø³Ø¬Ù‰",
    "Ø¹Ø¨ÙŠØ±", "Ø£Ø«ÙŠØ±", "Ø¨ØªÙˆÙ„", "Ø¬Ù…Ø§Ù†Ø©", "Ø­ÙˆØ±", "Ø¯ÙŠÙ…Ø©", "Ø±ØºØ¯", "Ø³ÙŠÙ„ÙŠÙ†", "Ø´Ù‡Ø¯", "Ø¶Ø­Ù‰",
    "ÙØ±Ø­", "Ù„ÙˆØ¬ÙŠÙ†", "Ù…Ù„Ø§Ùƒ", "Ù†ÙˆØ±ÙŠÙ†", "Ù‡Ù†Ø¯", "Ø¢ÙŠØ©", "Ø¨Ø´Ø±Ù‰", "Ø­Ù„Ø§", "Ø±Ø§Ù…Ø§", "Ø³Ù„Ù…Ù‰",
    "Ø´ÙŠÙ…Ø§Ø¡", "Ø¹Ø±ÙˆØ¨", "ØºÙ†Ù‰", "Ù„Ù…Ù‰", "Ù…Ù‡Ø§", "Ù†Ø§Ø¯ÙŠØ©", "Ù‡Ø¨Ø©", "Ø¢Ù„Ø§Ø¡", "Ø¨Ù„Ù‚ÙŠØ³", "Ø­ÙŠØ§Ø©",
    "Ø±ÙŠÙ†", "Ø³Ø§Ø±Ø©", "Ø´Ø°Ù‰", "Ø¹Ù„ÙŠØ§Ø¡", "ÙØ¬Ø±", "Ù„Ø§Ø±Ø§", "Ù…Ø±ÙˆØ©", "Ù†Ø²Ù‡Ø©", "Ù‡Ù†Ø§Ø¡", "Ø¥ÙŠÙ†Ø§Ø³",
    "Ø¨ÙŠØ³Ø§Ù†", "Ø­Ø¨ÙŠØ¨Ø©", "Ø±Ø§Ù†ÙŠØ©", "Ø³Ù…Ø§", "Ø´Ø±ÙˆÙ‚", "Ø¹Ù†ÙˆØ¯", "ÙÙˆØ²ÙŠØ©", "Ù„Ù…ÙŠØ§Ø¡", "Ù…Ù†Ù‰", "Ù†ÙˆØ±Ø§",
    "Ù‡ÙŠØ§", "Ø¥ÙŠÙ„Ø§Ù", "Ø¨Ø§Ù‡Ø±Ø©", "Ø­Ù†ÙŠÙ†", "Ø±ÙŠÙ†ÙŠÙ‡", "Ø³Ø­Ø±", "Ø´Ù…Ø³", "ØºØ²Ù„", "Ù„ÙŠÙ†Ø§", "Ù…ÙŠØ§Ø±"
],

  "Ø³ÙŠØ§Ø±Ø§Øª": [
    "ØªÙˆÙŠÙˆØªØ§", "Ù†ÙŠØ³Ø§Ù†", "Ù‡ÙˆÙ†Ø¯Ø§", "Ù…Ø§Ø²Ø¯Ø§", "Ø³ÙˆØ¨Ø§Ø±Ùˆ",
    "Ù…ÙŠØªØ³ÙˆØ¨ÙŠØ´ÙŠ", "Ø³ÙˆØ²ÙˆÙƒÙŠ", "Ù„ÙŠÙƒØ³ÙˆØ³", "Ø£ÙƒÙˆØ±Ø§", "Ø¥Ù†ÙÙŠÙ†ÙŠØªÙŠ",
    "Ù…Ø±Ø³ÙŠØ¯Ø³ Ø¨Ù†Ø²", "Ø¨ÙŠ Ø¥Ù… Ø¯Ø¨Ù„ÙŠÙˆ", "Ø£ÙˆØ¯ÙŠ", "ÙÙˆÙ„ÙƒØ³ ÙØ§Ø¬Ù†", "Ø¨ÙˆØ±Ø´",
    "Ø£ÙˆØ¨Ù„", "Ù…Ø§ÙŠØ¨Ø§Ø®", "Ø³Ù…Ø§Ø±Øª", "Ù…Ø§Ù†", "ÙÙˆØ±Ø¯",
    "Ø´ÙŠÙØ±ÙˆÙ„ÙŠÙ‡", "Ø¬ÙŠØ¨", "Ø¯ÙˆØ¯Ø¬", "ÙƒØ±Ø§ÙŠØ³Ù„Ø±", "ØªÙŠØ³Ù„Ø§",
    "ÙƒØ§Ø¯ÙŠÙ„Ø§Ùƒ", "Ø¨ÙˆÙŠÙƒ", "Ù„ÙŠÙ†ÙƒÙˆÙ„Ù†", "Ø±Ø§Ù…", "Ù‡ÙŠÙˆÙ†Ø¯Ø§ÙŠ",
    "ÙƒÙŠØ§", "Ø¬Ù†ÙŠØ³ÙŠØ³", "Ø³Ø§Ù†Ø¬ ÙŠÙˆÙ†Ø¬", "Ø¯Ø§ÙŠÙˆ", "ÙÙŠØ±Ø§Ø±ÙŠ",
    "Ù„Ø§Ù…Ø¨ÙˆØ±ØºÙŠÙ†ÙŠ", "Ù…Ø§Ø²ÙŠØ±Ø§ØªÙŠ", "Ø£Ù„ÙØ§ Ø±ÙˆÙ…ÙŠÙˆ", "ÙÙŠØ§Øª", "Ù„Ø§Ù†Ø´ÙŠØ§",
    "Ø¨Ø§Ø¬Ø§Ù†ÙŠ", "Ø¯Ø§ØªØ³ÙˆÙ†", "Ø¥ÙŠÙÙˆ", "Ø±ÙŠÙ†Ùˆ", "Ø¨ÙŠØ¬Ùˆ",
    "Ø³ÙŠØªØ±ÙˆÙŠÙ†", "Ø¨ÙˆØºØ§ØªÙŠ", "Ø¯ÙŠ Ø¥Ø³", "Ø±ÙˆÙ„Ø² Ø±ÙˆÙŠØ³", "Ø¨Ù†ØªÙ„ÙŠ",
    "Ø£Ø³ØªÙˆÙ† Ù…Ø§Ø±ØªÙ†", "Ø¬Ø§ØºÙˆØ§Ø±", "Ù„Ø§Ù†Ø¯ Ø±ÙˆÙØ±", "Ù…ÙŠÙ†ÙŠ", "Ù…Ø§ÙƒÙ„Ø§Ø±ÙŠÙ†",
    "Ù„ÙˆØªØ³", "Ù…ÙˆØ±Ø¬Ø§Ù†", "ÙÙˆÙƒØ³Ù‡ÙˆÙ„", "ÙÙˆÙ„ÙÙˆ", "ÙƒÙˆØ¨ÙŠÙ†Ø¬",
    "Ø³Ø§Ø¨", "Ø³ÙƒÙˆØ¯Ø§", "Ø³Ø¨Ø§ÙŠÙƒØ±", "Ù‡ÙˆÙ„Ø¯Ù†", "ØªØ§ØªØ§ Ù…ÙˆØªÙˆØ±Ø²",
    "Ù…Ø§Ù‡ÙŠÙ†Ø¯Ø±Ø§", "Ø¬ÙŠÙ„ÙŠ", "Ø¨ÙŠ ÙˆØ§ÙŠ Ø¯ÙŠ", "Ø¬Ø§Ùƒ", "Ø´ÙŠØ±ÙŠ",
    "Ù‡Ø§ÙØ§Ù„", "Ø³Ø§ÙŠÙƒ", "Ø¬Ø±ÙŠØª ÙˆÙˆÙ„", "Ø¯ÙˆÙ†Ø¬ ÙÙŠÙ†Ø¬", "Ù„ÙŠÙØ§Ù†",
    "Ø²ÙˆØªÙŠ", "Ù„Ø§Ø¯Ø§", "ØºØ§Ø²", "ÙØ§Ø²", "Ø£ÙˆØ±Ø§Ù„",
    "ÙƒØ§Ù…Ø§Ø²", "Ø¨Ø±ÙˆØªÙˆÙ†", "Ø¨Ø±Ù„ÙŠÙŠØª", "ÙƒØ§Ø¨Ù†ÙŠÙƒ", "ÙÙˆØªÙˆÙ†",
    "ØªØ´Ø§Ù†Ø¬Ø§Ù†", "ÙÙŠØ§Øª ÙƒØ±Ø§ÙŠØ³Ù„Ø±", "Ù…ÙŠØªØ³ÙˆÙƒØ§", "ØªØ§ØªØ±Ø§", "Ø²ÙŠÙ†ÙˆØ±Ùˆ",
    "Ø³ÙŠÙƒÙˆÙŠØ§", "ÙÙŠÙ†ÙŠÙƒØ³", "ÙŠÙˆÙ†ÙŠÙƒ", "ÙØ§Ø±Ù…ÙˆÙ†Øª", "Ø²ÙŠØ³ÙŠØ³",
    "ÙÙŠØ³ÙƒØ±", "Ù„ÙˆØ³ÙŠØ¯ Ù…ÙˆØªÙˆØ±Ø²", "Ø±ÙŠÙÙŠÙ†", "ÙˆÙ„Ø³ØªØ§Ø±", "Ø£Ø³Ø¨Ø§Ø±Ùƒ",
    "Ù…Ø§Ù‡Ø§", "ÙØ§Ùˆ", "Ø¬Ø§ÙƒÙˆØ§Ø± Ù„Ø§Ù†Ø¯ Ø±ÙˆÙØ±", "Ø¯ÙŠÙ†Ø§Ù„ÙŠ"
]
};


/* =============== Ø¹Ù†Ø§ØµØ± DOM Ù…Ø®ØªØµØ±Ø© =============== */
const el = (id)=>document.getElementById(id);

/* ================ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… ================ */
(function initCategorySelect(){
  const sel = el('optCategory');
  sel.innerHTML = '<option value="">(Ø¹Ø´ÙˆØ§Ø¦ÙŠ)</option>' + Object.keys(allCategories).map(k=>`<option>${k}</option>`).join('');
  // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø®Ø²Ù†Ø©
  el('optDuration').value = duration;
  el('optWordCount').value = wordCount;
  el('optAllowAny').checked = allowAny;
  el('optCooldown').value = cooldownSec;
  updatePlayersList('blue'); updatePlayersList('red');
  renderScores();
})();

/* ================ Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ================= */
['optDuration','optWordCount','optCooldown'].forEach(id=>{
  el(id).addEventListener('change',()=>{
    if(id==='optDuration'){ duration = Math.max(30, Number(el(id).value)||300); localStorage.setItem('tk_duration', duration); }
    if(id==='optWordCount'){ wordCount = Math.min(12, Math.max(2, Number(el(id).value)||7)); localStorage.setItem('tk_wordcount', wordCount); }
    if(id==='optCooldown'){ cooldownSec = Math.max(0, Number(el(id).value)||0); localStorage.setItem('tk_cooldown', cooldownSec); }
  });
});
el('optAllowAny').addEventListener('change',()=>{
  allowAny = el('optAllowAny').checked;
  localStorage.setItem('tk_any', allowAny);
});

/* ================ ÙˆØ¸Ø§Ø¦Ù Ø£Ø³Ø§Ø³ÙŠØ© ================== */
function startRound(){
  // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø­Ø§Ù„ÙŠ (ØªÙ†Ø§ÙˆØ¨)
  currentTeam = currentTeamIndex % 2 === 0 ? 'blue' : 'red';
  currentTeamIndex++;
  el('currentTeam').textContent = currentTeam==='blue' ? 'ğŸ”µ Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£Ø²Ø±Ù‚' : 'ğŸ”´ Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£Ø­Ù…Ø±';
  el('gameBox').className = 'game-box ' + (currentTeam==='blue'?'team-turn-blue':'team-turn-red');

  // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø¬ÙˆÙ„Ø©
  foundWords = [];
  availableLetters = [];
  roundLetters = [];
  roundWords = [];
  playersScore = {};
  playerLastMsgTs = {};
  el('wordsFound').innerHTML = '';
  el('missedWords').innerHTML = '';
  el('pointsInfo').textContent = '';

  // ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ÙƒÙ„Ù…Ø§Øª ÙˆØ§Ù„Ø­Ø±ÙˆÙ
  generateRound();

  // Ø§Ù„Ù…Ø¤Ù‚Øª Ø§Ù„Ø¯Ù‚ÙŠÙ‚
  clearInterval(roundTimer);
  const now = Date.now();
  roundEndsAt = now + duration*1000;
  roundPaused = false;
  tickTimer(); // ØªØ­Ø¯ÙŠØ« ÙÙˆØ±ÙŠ
  roundTimer = setInterval(tickTimer, 250);
  el('pauseLbl').textContent = 'â¸ï¸ Ø¥ÙŠÙ‚Ø§Ù Ù…Ø¤Ù‚Øª';
}

function pauseResume(){
  if(!roundEndsAt) return;
  if(!roundPaused){
    // Ø¥ÙŠÙ‚Ø§Ù: Ù†Ø­ÙØ¸ Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ ÙˆÙ†ØµÙØ± Ø§Ù„Ø¹Ø¯Ø§Ø¯
    const remain = Math.max(0, roundEndsAt - Date.now());
    roundEndsAt = Date.now() + remain; // ØªØ«Ø¨ÙŠØª Ø§Ù„Ù‚ÙŠÙ…Ø©
    clearInterval(roundTimer);
    roundPaused = true;
    el('pauseLbl').textContent = 'â–¶ï¸ Ø§Ø³ØªØ¦Ù†Ø§Ù';
  }else{
    // Ø§Ø³ØªØ¦Ù†Ø§Ù: Ù†Ø¹ÙŠØ¯ Ø§Ù„Ø¹Ø¯Ø§Ø¯
    roundPaused = false;
    roundTimer = setInterval(tickTimer, 250);
    el('pauseLbl').textContent = 'â¸ï¸ Ø¥ÙŠÙ‚Ø§Ù Ù…Ø¤Ù‚Øª';
  }
}

function tickTimer(){
  if(roundPaused) return;
  const remainMs = Math.max(0, roundEndsAt - Date.now());
  const s = Math.ceil(remainMs/1000);
  el('timer').textContent = `Ø§Ù„ÙˆÙ‚Øª: ${Math.floor(s/60)}:${String(s%60).padStart(2,'0')}`;
  if(remainMs<=0){
    endRound();
  }
}

function endRound(){
  clearInterval(roundTimer);
  roundTimer = null;
  roundPaused = false;

  // Ø­Ø³Ø§Ø¨ Ù†Ù‚Ø§Ø· Ø§Ù„ÙØ±ÙŠÙ‚ ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ø¬ÙˆÙ„Ø©
  const teamPoints = foundWords.length;
  el('pointsInfo').textContent = `Ø§Ù„Ù†Ù‚Ø§Ø·: ${teamPoints}`;
  el('gameBox').className = 'game-box';
  el('currentTeam').textContent = 'Ø§Ù„Ø¯ÙˆØ±: Ù„Ø§ Ø£Ø­Ø¯';

  // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø­Ø±ÙˆÙ ØºÙŠØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©
  document.querySelectorAll('.letter').forEach(letter=>{
    if(!letter.classList.contains('letter-used')) letter.style.opacity = .25;
  });

  // Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„ÙØ§Ø¦ØªØ© (Ø¥Ø°Ø§ ÙƒØ§Ù† ÙˆØ¶Ø¹ Ø§Ù„Ù‚Ø§Ù…ÙˆØ³)
  if(!allowAny){
    const all = new Set(roundWords);
    foundWords.forEach(w=>all.delete(w));
    const missed = Array.from(all);
    el('missedWords').innerHTML = missed.length ? missed.map(w=>`â€¢ ${w}`).join('<br>') : '<span class="muted">Ù„Ø§ ÙŠÙˆØ¬Ø¯</span>';
  }else{
    el('missedWords').innerHTML = '<span class="muted">ÙˆØ¶Ø¹ "Ø£ÙŠ ÙƒÙ„Ù…Ø©" Ù…ÙØ¹Ù‘Ù„ â€” Ù„Ø§ ØªÙˆØ¬Ø¯ Ù‚Ø§Ø¦Ù…Ø© ÙØ§Ø¦ØªØ©.</span>';
  }

  // ØªØ­Ø¯ÙŠØ« Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
  updateScoreTable(teamPoints);

  // ØªÙˆÙ„ÙŠØ¯ Ù…Ù„Ø®Øµ Ø§Ù„Ø¬ÙˆÙ„Ø©
  buildSummary(teamPoints);

  // Ø²ÙŠØ§Ø¯Ø© Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆÙ„Ø©
  currentRound++;
  saveScores();
}

function generateRound(){
  // Ø§Ø®ØªÙŠØ§Ø± ÙØ¦Ø©
  const selCat = el('optCategory').value;
  let category = selCat || pick(Object.keys(allCategories));
  const wordList = [...allCategories[category]];
  shuffleArray(wordList);

  // ØªØ­Ø¯ÙŠØ¯ ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ø¬ÙˆÙ„Ø© Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† ÙˆØ¶Ø¹ "Ø£ÙŠ ÙƒÙ„Ù…Ø©"
  if(!allowAny){
    roundWords = wordList.slice(0, wordCount);
  }else{
    roundWords = []; // ÙŠÙØ­ØªØ³Ø¨ Ù…Ù† Ø§Ù„Ø­Ø±ÙˆÙ ÙÙ‚Ø·
  }

  // ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø­Ø±ÙˆÙ: Ù…Ù† ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ø¬ÙˆÙ„Ø© Ø£Ùˆ Ù…Ù† Ù‚Ø§Ø¦Ù…Ø© Ù…Ø®ØªØ§Ø±Ø© Ø¹Ø´ÙˆØ§Ø¦ÙŠÙ‹Ø§ Ø¥Ø°Ø§ allowAny
  const srcWords = roundWords.length ? roundWords : wordList.slice(0, wordCount);
  roundLetters = [];
  srcWords.forEach(w => roundLetters.push(...w.split('')));
  availableLetters = [...roundLetters];
  shuffleArray(roundLetters);

  el('category').textContent = `Ø§Ù„ÙØ¦Ø©: ${category}`;
  renderLetters();
}

function renderLetters(){
  const c = el('letters'); c.innerHTML='';
  roundLetters.forEach((ch,i)=>{
    const d = document.createElement('div');
    d.className='letter'; d.id=`l-${i}`; d.textContent=ch;
    c.appendChild(d);
  });
}

function onChatMessage(username, message){
  // Ø´Ø±ÙˆØ· Ø¹Ø§Ù…Ø©
  if(!currentTeam || !roundTimer) return;

  // Ø§Ù„Ù„Ø§Ø¹Ø¨ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† ÙÙŠ Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø­Ø§Ù„ÙŠ
  const currentTeamPlayers = currentTeam==='blue' ? bluePlayers : redPlayers;
  if(!currentTeamPlayers.includes(username)) return;

  // ØªØ¨Ø§Ø·Ø¤ Ù„Ù„Ø­Ø¯ Ù…Ù† Ø§Ù„Ø³Ø¨Ø§Ù…
  const now = Date.now();
  if(cooldownSec>0){
    const last = playerLastMsgTs[username] || 0;
    if(now - last < cooldownSec*1000) return;
    playerLastMsgTs[username] = now;
  }

  const clean = message.trim();
  if(!clean) return;

  // Ù…Ù†Ø¹ Ø§Ù„ØªÙƒØ±Ø§Ø±
  if(foundWords.includes(clean)) return;

  // ØªØ­Ù‚Ù‚ Ù‚Ø¯Ø±Ø© Ø§Ù„ØªÙƒÙˆÙŠÙ† Ù…Ù† Ø§Ù„Ø­Ø±ÙˆÙ
  if(!canFormFromLetters(clean)) return;

  if(allowAny){
    // Ù†Ù‚Ø¨Ù„ Ø£ÙŠ ÙƒÙ„Ù…Ø© Ù…Ù† Ø§Ù„Ø­Ø±ÙˆÙ Ø·Ø§Ù„Ù…Ø§ Ù„Ù… ØªØªÙƒØ±Ø±
    acceptWord(clean, username, /*points=*/1);
  }else{
    // ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ø¶Ù…Ù† ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ø¬ÙˆÙ„Ø©
    if(roundWords.includes(clean)){
      acceptWord(clean, username, /*points=*/1);
      // Ø¥Ø°Ø§ Ø§ÙƒØªÙ…Ù„Øª Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙƒÙ„Ù…Ø§Øª â€” Ù†Ù†Ù‡ÙŠ Ø§Ù„Ø¬ÙˆÙ„Ø©
      if(foundWords.length === roundWords.length) endRound();
    }
  }
}

function canFormFromLetters(word){
  const temp = [...availableLetters];
  for(const ch of [...word]){
    const idx = temp.indexOf(ch);
    if(idx===-1) return false;
    temp.splice(idx,1);
  }
  return true;
}

function markLetters(word){
  const chars = [...word];
  // Ø®ØµÙ… Ù…Ù† Ø§Ù„Ø­Ø±ÙˆÙ Ø§Ù„Ù…ØªØ§Ø­Ø©
  for(const ch of chars){
    const idx = availableLetters.indexOf(ch);
    if(idx!==-1) availableLetters.splice(idx,1);
  }
  // ØªÙ…ÙŠÙŠØ² ÙÙŠ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
  const nodes = Array.from(document.querySelectorAll('.letter'));
  for(const ch of chars){
    const node = nodes.find(n=>n.textContent===ch && !n.classList.contains('letter-used'));
    if(node) node.classList.add('letter-used');
  }
}

function acceptWord(clean, username, points){
  foundWords.push(clean);
  markLetters(clean);
  // Ù†Ù‚Ø§Ø· Ø§Ù„Ù„Ø§Ø¹Ø¨
  if(!playersScore[username]) playersScore[username]=0;
  playersScore[username]+=points;

  // Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„Ù…Ø©
  el('wordsFound').innerHTML += `
    <div style="background:#1f1f1f;padding:6px 10px;border-radius:8px;margin-bottom:6px;border:1px solid #333">
      âœ… ${clean} â€” <span class="muted">@${username}</span>
      <span class="pill">+${points} Ù†Ù‚Ø·Ø©</span>
    </div>
  `;
  renderPlayersContrib();
}

function renderPlayersContrib(){
  const cont = el('playersContrib');
  const entries = Object.entries(playersScore).sort((a,b)=>b[1]-a[1]);
  cont.innerHTML = entries.length ? entries.map(([u,s])=>`<div class="flex" style="justify-content:space-between"><strong>@${u}</strong><span class="pill">${s} Ù†Ù‚Ø·Ø©</span></div>`).join('') : '<span class="muted">Ù„Ø§ Ù…Ø³Ø§Ù‡Ù…Ø§Øª Ø¨Ø¹Ø¯.</span>';
}

/* ============== Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† ============== */
function addPlayerFromInput(team){
  const id = team==='blue' ? 'bluePlayerInput' : 'redPlayerInput';
  const name = el(id).value.trim();
  if(name){ addPlayerFromChat(team, name); el(id).value=''; }
}
function quickJoin(team){
  const name = prompt('Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ù„Ù„Ø§Ù†Ø¶Ù…Ø§Ù…:');
  if(name) addPlayerFromChat(team, name.trim());
}
function addPlayerFromChat(team, username){
  const list = team==='blue'? bluePlayers : redPlayers;
  const other = team==='blue'? redPlayers : bluePlayers;
  if(!username) return;
  if(list.includes(username) || other.includes(username)) return;
  list.push(username);
  updatePlayersList(team);
  persistPlayers();
}
function updatePlayersList(team){
  const listId = team==='blue' ? 'bluePlayers' : 'redPlayers';
  const players = team==='blue' ? bluePlayers : redPlayers;
  const c = el(listId); c.innerHTML='';
  players.forEach(p=>{
    const div = document.createElement('div');
    div.className='player-entry';
    div.innerHTML = `<span>â€¢ ${p}</span> <button class="btn mini" onclick="removePlayer('${team}','${p}')">Ø­Ø°Ù</button>`;
    c.appendChild(div);
  });
}
function removePlayer(team, username){
  let arr = team==='blue' ? bluePlayers : redPlayers;
  const i = arr.indexOf(username);
  if(i>-1){ arr.splice(i,1); updatePlayersList(team); persistPlayers(); }
}
function persistPlayers(){
  localStorage.setItem('tk_blue', JSON.stringify(bluePlayers));
  localStorage.setItem('tk_red', JSON.stringify(redPlayers));
}

/* ============== Ø§Ù„Ù†ØªØ§Ø¦Ø¬/Ø§Ù„Ø³ÙƒÙˆØ± ============== */
function updateScoreTable(points){
  if(currentTeam==='blue'){
    roundScores.push({round: currentRound, blue: points, red: 0});
  }else{
    roundScores.push({round: currentRound, blue: 0, red: points});
  }
  renderScores();
}
function renderScores(){
  const tb = el('scoreTableBody'); tb.innerHTML='';
  roundScores.forEach(r=>{
    const tr = document.createElement('tr');
    tr.innerHTML = `<td>${r.round}</td><td>${r.blue}</td><td>${r.red}</td>`;
    tb.appendChild(tr);
  });
  const blueTotal = roundScores.reduce((s,r)=>s+r.blue,0);
  const redTotal  = roundScores.reduce((s,r)=>s+r.red,0);
  el('blueTotalScore').textContent = blueTotal;
  el('redTotalScore').textContent  = redTotal;
}
function saveScores(){
  localStorage.setItem('tk_scores', JSON.stringify(roundScores));
}

/* ============== Ø£Ø¯ÙˆØ§Øª Ù…Ø³Ø§Ø¹Ø¯Ø© ============== */
function pick(arr){ return arr[Math.floor(Math.random()*arr.length)] }
function shuffleArray(a){ for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];} }

/* ============== Ø§Ù„Ù…Ù„Ø®Øµ ============== */
function buildSummary(teamPoints){
  const teamName = currentTeam==='blue'?'Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£Ø²Ø±Ù‚':'Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£Ø­Ù…Ø±';
  const wordsList = foundWords.map(w=>`- ${w}`).join('\n');
  const contrib = Object.entries(playersScore).sort((a,b)=>b[1]-a[1]).map(([u,s])=>`@${u}: ${s} Ù†Ù‚Ø·Ø©`).join('\n');
  const blueTotal = roundScores.reduce((s,r)=>s+r.blue,0);
  const redTotal  = roundScores.reduce((s,r)=>s+r.red,0);
  const text = `Ù…Ù„Ø®Øµ Ø§Ù„Ø¬ÙˆÙ„Ø© #${currentRound}
Ø§Ù„ÙØ±ÙŠÙ‚: ${teamName}
Ø§Ù„Ù†Ù‚Ø§Ø· ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ø¬ÙˆÙ„Ø©: ${teamPoints}

Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ù‚Ø¨ÙˆÙ„Ø©:
${wordsList || '- Ù„Ø§ ÙŠÙˆØ¬Ø¯'}

Ù…Ø³Ø§Ù‡Ù…Ø§Øª Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†:
${contrib || '- Ù„Ø§ ÙŠÙˆØ¬Ø¯'}

Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø­ØªÙ‰ Ø§Ù„Ø¢Ù† â€” Ø§Ù„Ø£Ø²Ø±Ù‚: ${blueTotal} | Ø§Ù„Ø£Ø­Ù…Ø±: ${redTotal}
ÙˆØ¶Ø¹ Ø£ÙŠ ÙƒÙ„Ù…Ø©: ${allowAny ? 'Ù…ÙØ¹Ù‘Ù„' : 'Ù…ØªÙˆÙ‚Ù'}
Ø²Ù…Ù† Ø§Ù„Ø¬ÙˆÙ„Ø©: ${Math.floor(duration/60)}:${String(duration%60).padStart(2,'0')}`;
  el('summaryText').value = text;
}
function copySummary(){
  const ta = el('summaryText'); ta.select(); ta.setSelectionRange(0, 99999);
  document.execCommand('copy');
  alert('ØªÙ… Ù†Ø³Ø® Ø§Ù„Ù…Ù„Ø®Øµ!');
}

/* ============== Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¶Ø¨Ø· ============== */
function resetGame(){
  clearInterval(roundTimer); roundTimer=null; roundPaused=false; roundEndsAt=0;
  bluePlayers=[]; redPlayers=[]; persistPlayers();
  currentTeam=''; currentTeamIndex=0; foundWords=[]; roundWords=[]; roundLetters=[]; availableLetters=[];
  playersScore={}; playerLastMsgTs={};
  roundScores=[]; saveScores(); currentRound=1;
  el('bluePlayers').innerHTML=''; el('redPlayers').innerHTML='';
  el('letters').innerHTML=''; el('wordsFound').innerHTML=''; el('missedWords').innerHTML='';
  el('currentTeam').textContent='Ø§Ù„Ø¯ÙˆØ±: Ù„Ø§ Ø£Ø­Ø¯';
  el('timer').textContent='Ø§Ù„ÙˆÙ‚Øª: 5:00';
  el('category').textContent='Ø§Ù„ÙØ¦Ø©: ...';
  el('pointsInfo').textContent='';
  el('gameBox').className='game-box';
  el('scoreTableBody').innerHTML='';
  el('blueTotalScore').textContent='0'; el('redTotalScore').textContent='0';
  el('summaryText').value='';
}

/* ============== Ø§ØªØµØ§Ù„ Ø§Ù„Ø´Ø§Øª ============== */
function connectChat(){
  const platform = el("platformSelect").value;
  const channel = el("channelInput").value.trim();
  if(!channel){ alert('Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ù‚Ù†Ø§Ø© Ø£ÙˆÙ„Ø§Ù‹'); return; }

  // Ø¥ØºÙ„Ø§Ù‚ Ø£ÙŠ Ø§ØªØµØ§Ù„ Ø³Ø§Ø¨Ù‚
  try{ if(chatClient) chatClient.disconnect(); }catch(e){}
  try{ if(kickSocket) kickSocket.close(); }catch(e){}

  if(platform === "twitch"){
    chatClient = new tmi.Client({
      channels:[channel],
      connection:{ reconnect:true, secure:true }
    });
    chatClient.connect().then(()=> el("chatStatus").textContent="âœ… Ù…ØªØµÙ„ Ø¨Ù€ Twitch").catch(err=>{
      console.error(err); el("chatStatus").textContent="âŒ ÙØ´Ù„ Ø§ØªØµØ§Ù„ Twitch";
    });
    chatClient.on("message",(ch, tags, msg, self)=>{
      if(self) return;
      const username = tags["display-name"] || tags.username;
      const content = msg.trim();
      if(content==="!Ø§Ø²Ø±Ù‚"){ addPlayerFromChat("blue", username); }
      else if(content==="!Ø§Ø­Ù…Ø±"){ addPlayerFromChat("red", username); }
      else{ onChatMessage(username, content); }
    });
  }

  if(platform === "kick"){
    (async ()=>{
      try{
        const res = await fetch(`https://kick.com/api/v2/channels/${channel}`);
        const data = await res.json();
        const roomId = data.chatroom.id;
        kickSocket = new WebSocket("wss://ws-us2.pusher.com/app/32cbd69e4b950bf97679?protocol=7&client=js&version=8.4.0-rc2");
        kickSocket.onopen = ()=>{
          kickSocket.send(JSON.stringify({
            event:"pusher:subscribe",
            data:{ auth:"", channel:`chatrooms.${roomId}.v2` }
          }));
          const ping = setInterval(()=>{
            if(kickSocket.readyState===WebSocket.OPEN){
              kickSocket.send(JSON.stringify({event:"pusher:ping", data:{}}));
            }else{ clearInterval(ping); }
          }, 12000);
          el("chatStatus").textContent="âœ… Ù…ØªØµÙ„ Ø¨Ù€ Kick";
        };
        kickSocket.onmessage = (ev)=>{
          const msg = JSON.parse(ev.data);
          if(msg.event==="App\\Events\\ChatMessageEvent"){
            const d = JSON.parse(msg.data);
            const username = d.sender.username;
            const content = (d.content||"").trim();
            if(content==="!Ø§Ø²Ø±Ù‚"){ addPlayerFromChat("blue", username); }
            else if(content==="!Ø§Ø­Ù…Ø±"){ addPlayerFromChat("red", username); }
            else{ onChatMessage(username, content); }
          }
        };
        kickSocket.onclose = ()=> el("chatStatus").textContent="âŒ ØªÙ… Ù‚Ø·Ø¹ Ø§ØªØµØ§Ù„ Kick";
      }catch(e){
        console.error(e); el("chatStatus").textContent="âŒ ÙØ´Ù„ Ø§ØªØµØ§Ù„ Kick";
      }
    })();
  }
}

/* ============== Ø£Ø¯ÙˆØ§Øª Ù…ØªÙ†ÙˆØ¹Ø© ============== */
function canFormFromLetters(word){
  const temp=[...availableLetters];
  for(const ch of [...word]){
    const idx=temp.indexOf(ch);
    if(idx===-1) return false;
    temp.splice(idx,1);
  }
  return true;
}
</script>
</body>
</html>
