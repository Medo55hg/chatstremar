<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<title>ğŸ¯ Ù„Ø¹Ø¨Ø© Ø®Ù…Ø§Ø³ÙŠØ§Øª</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link href="https://fonts.googleapis.com/css2?family=Amiri&display=swap" rel="stylesheet">
<style>
body { background-color: #111; color: #fff; font-family: 'Amiri', serif; text-align: center; padding: 20px; }
h1 { color: #ff3333; margin-top: 10px; }
.description { background-color: #222; border: 2px solid #555; border-radius: 10px; padding: 15px; font-size: 18px; line-height: 1.6; width: 90%; max-width: 800px; margin: 20px auto; }
.grid { display: grid; grid-template-columns: repeat(5, 60px); grid-template-rows: repeat(8, 60px); gap: 5px; justify-content: center; margin: 20px 0; }
.cell { width: 60px; height: 60px; background-color: #333; border: 2px solid #555; font-size: 32px; color: #fff; display: flex; align-items: center; justify-content: center; }
.cell.correct { background-color: #4caf50; border-color: #4caf50; }
.cell.present { background-color: #f1c40f; border-color: #f1c40f; color: #000; }
.cell.absent { background-color: #555; border-color: #555; color: #aaa; }
.keyboard-container { display: flex; flex-direction: column; gap: 5px; max-width: 650px; margin: auto; }
.keyboard-row { display: flex; gap: 5px; justify-content: center; flex-wrap: wrap; }
.key { width: 50px; height: 50px; padding: 0; font-size: 22px; background-color: #222; color: #fff; border: 1px solid #555; border-radius: 6px; cursor: pointer; text-align: center; user-select: none; display: flex; align-items: center; justify-content: center; }
.key.correct { background-color: #4caf50 !important; color: #fff; }
.key.present { background-color: #f1c40f !important; color: #000; }
.key.absent { background-color: #555 !important; color: #aaa; }
.key:hover { background-color: #444; }
.key-enter { background-color: #28a745 !important; color: #fff; }
.key-backspace { background-color: #c0392b !important; color: #fff; }
.message { margin-top: 15px; font-size: 18px; color: #0f0; }
.summary { margin-top: 20px; }
.summary-grid { display: inline-grid; grid-template-columns: repeat(5, 30px); grid-template-rows: repeat(8, 30px); gap: 2px; margin: 10px; }
.summary-cell { width:30px; height:30px; font-size:18px; border:1px solid #555; display:flex; align-items:center; justify-content:center; }
.summary-cell.correct { background-color:#4caf50; }
.summary-cell.present { background-color:#f1c40f; color:#000; }
.summary-cell.absent { background-color:#555; color:#aaa; }
</style>
</head>
<body>
<h1>ğŸ¯ Ø®Ù…Ø§Ø³ÙŠØ§Øª</h1>
<div class="description">
ğŸ§  <strong>Ø´Ø±Ø­ Ø§Ù„Ù„Ø¹Ø¨Ø©:</strong><br>
ÙƒÙ„ ÙŠÙˆÙ… 3 ÙƒÙ„Ù…Ø§Øª Ø¬Ø¯ÙŠØ¯Ø© Ù…ÙƒÙˆÙ†Ø© Ù…Ù† 5 Ø­Ø±ÙˆÙ.<br>
Ù„Ø¯ÙŠÙƒ 8 Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ù„ÙƒÙ„ ÙƒÙ„Ù…Ø© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ÙƒÙŠØ¨ÙˆØ±Ø¯.<br>
ğŸŸ© Ø£Ø®Ø¶Ø±: Ø§Ù„Ø­Ø±Ù ØµØ­ÙŠØ­ ÙˆÙÙŠ Ù…ÙƒØ§Ù†Ù‡.<br>
ğŸŸ¨ Ø£ØµÙØ±: Ø§Ù„Ø­Ø±Ù Ù…ÙˆØ¬ÙˆØ¯ Ù„ÙƒÙ† ÙÙŠ Ù…ÙƒØ§Ù† Ø®Ø§Ø·Ø¦.<br>
Ø¨Ø¹Ø¯ Ø­Ù„ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø£Ùˆ Ø§Ø³ØªÙ†ÙØ§Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§ØªØŒ ØªØ¹Ø±Ø¶ Ù…Ø­Ø§ÙˆÙ„Ø§ØªÙƒ ÙƒÙ„Ù‡Ø§.<br>
</div>

<div id="summary" class="summary"></div>

<div class="game-container">
<div id="correctAnswer" class="message" style="color:#0ff; text-align:right;"></div>
<div id="grid" class="grid"></div>
<div class="keyboard-container">
<div class="keyboard-row" id="row1"></div>
<div class="keyboard-row" id="row2"></div>
<div class="keyboard-row">
<div class="key key-backspace" onclick="handleBackspace()">âŒ«</div>
<div class="key key-enter" onclick="handleEnter()">â</div>
</div>
</div>
<div class="message" id="messageBox"></div>
</div>

<script>
const sixLetterWords = [
  "Ø£Ø²Ù‡Ø§Ø±","Ø£Ø­Ø¯Ø§Ø«","Ø£ØµÙˆØ§Øª","Ø£Ù…Ø«Ù„Ø©","Ø£Ù…Ø§Ù†Ø©","Ø£Ø´Ø¬Ø§Ø±","Ø¥Ø¨ØµØ§Ø±","Ø¥Ø¹ØµØ§Ø±","Ø¥Ø´Ø§Ø±Ø©","Ø¥Ù‚Ø§Ù…Ø©",
  "Ø¨Ø­Ø±ÙŠØ©","Ø¨Ù„Ø¯ÙŠØ©","Ø¨Ø´Ø§Ø±Ø©","Ø¨Ø·Ø§Ù‚Ø©","Ø¨ÙˆØµÙ„Ø©","Ø¨Ø°ÙˆØ±Ùƒ","Ø¨Ù‚Ø§ÙŠØ§Ùƒ",
  "ØªØ¬Ø§Ø±Ø¨","ØªØ­Ù„ÙŠÙ‚","ØªØµÙ…ÙŠÙ…","ØªÙ‚Ø±ÙŠØ±","ØªÙˆØµÙŠØ©","ØªØ±ØªÙŠØ¨","ØªØ³Ù„ÙŠÙ…","ØªØ¯Ø±ÙŠØ¨","ØªØ¹Ø§ÙŠØ´","ØªØ¨Ø§Ø¯Ù„",
  "Ø¬Ø¯Ø§ÙˆÙ„","Ø¬Ø²ÙŠØ±Ø©","Ø¬Ù…Ø§Ø¹Ø©","Ø¬Ù…ÙŠÙ„Ø©","Ø¬ÙˆÙ„Ø§Øª","Ø¬Ø±Ø§Ø¦Ø¯","Ø¬ÙˆØ§Ø¦Ø²","Ø¬Ù„ÙˆØ³Ùƒ","Ø¬Ø¯ÙˆÙ„Ùƒ","Ø¬Ù…Ø§Ø±Ùƒ",
  "Ø­Ø¯Ø§Ø¦Ù‚","Ø­ÙƒØ§ÙŠØ©","Ø­Ø±Ø§Ø³Ø©","Ø­Ù‚ÙŠÙ‚Ø©","Ø­Ø³Ø§Ø¨Ùƒ","Ø­ØµÙŠÙ„Ø©","Ø­ÙˆØ§ÙØ²","Ø­Ù‚ÙˆÙ‚Ùƒ","Ø­Ø§Ø¶Ø±Ø©",
  "Ø®Ø§Ø¯Ù…Ø©","Ø®Ø·ÙˆØ§Øª","Ø®ÙŠØ§Ø±Ø§Øª","Ø®Ø²Ø§Ù†Ø©","Ø®Ø§Ø·Ø±Ùƒ","Ø®Ù„Ø§ØµØ©","Ø®Ø±ÙŠØ·Ø©","Ø®ØµØ§Ø¦Øµ","Ø®Ø·ÙŠØ±Ø©","Ø®ÙŠØ§Ù…Ùƒ",
  "Ø¯Ø¹ÙˆØ§Øª","Ø¯Ø±ÙˆØ³","Ø¯Ù„ÙŠÙ„Ùƒ","Ø¯Ø¹Ø§ÙˆÙ‰","Ø¯Ù‚ÙŠÙ‚Ø©","Ø¯Ø§Ø¦Ø±Ø©","Ø¯Ø¹Ù…ÙƒÙ…","Ø¯ÙØ¹Ø§Øª","Ø¯ÙˆØ§ÙØ¹",
  "Ø±Ø­Ù„Ø§Øª","Ø±Ø³Ø§Ù„Ø©","Ø±ØºØ¨Ø§Øª","Ø±ÙˆØ§Ø¨Ø·","Ø±ÙˆØ§ÙŠØ©","Ø±ØµÙŠÙÙƒ","Ø±Ø®ØµØªÙƒ","Ø±Ù‚Ø§Ø¦Ù‚",
  "Ø³ÙÙŠÙ†Ø©","Ø³ÙŠØ§Ø³Ø©","Ø³Ø¹Ø§Ø¯Ø©","Ø³Ø±Ø§Ø¦Ø±","Ø³Ù„Ø§Ù„Ø©","Ø³Ø±ÙŠØ¹Ø©","Ø³Ø¬Ù„Ø§Øª","Ø³ØªØ§Ø¦Ø±","Ø³Ø§Ø­Ø§Øª","Ø³Ù„Ù…ÙˆÙ†",
  "Ø´Ù‡Ø§Ø¯Ø©","Ø´Ø¬Ø§Ø¹Ø©","Ø´Ø¹Ø§Ø¦Ø±","Ø´ÙˆØ§Ù‡Ø¯","Ø´ÙˆØ§Ø·Ø¦","Ø´Ø±ÙŠØ¹Ø©","Ø´Ø¸Ø§ÙŠØ§","Ø´Ø±Ø§Ø¦Ø¹","Ø´Ø·Ø§Ø¦Ø±","Ø´Ø±ÙŠÙƒØ©",
  "ØµØ¯Ø§Ù‚Ø©","ØµÙ†Ø§Ø¹Ø©","ØµØ±Ø§Ø­Ø©","ØµÙŠØ§Ù†Ø©","ØµÙˆØ§Ø±ÙŠØ®","ØµÙŠØºØ§Øª","ØµØ­Ø§Ø¦Ù","ØµØ­Ø§Ø±Ù‰","ØµÙˆØ§Ø¹Ù‚",
  "Ø¶ÙŠØ§ÙØ©","Ø¶Ù…Ø§Ù†Ùƒ","Ø¶ÙˆØ§Ø¨Ø·","Ø¶ØºØ§Ø¦Ù†","Ø¶Ø±Ø§Ø¦Ø¨","Ø¶Ø±Ø¨Ø§Øª","Ø¶ÙŠØ§Ø¹Ùƒ","Ø¶Ø­ÙƒØ§Øª","Ø¶Ø¨Ø§Ø¨ÙŠ",
  "Ø·Ø§Ø­ÙˆÙ†","Ø·Ù…ÙˆØ­Ùƒ","Ø·Ø¨ÙŠØ¹ÙŠ","Ø·ÙˆØ§Ø¦Ù","Ø·Ø±Ø§Ø¦Ù","Ø·Ø¨Ù‚Ø§Øª","Ø·ÙˆØ§ÙØ©","Ø·Ù…Ø§Ø·Ù…","Ø·Ù„Ø¨Ø§Øª","Ø·ÙˆØ§Ù„Ø¹",
  "Ø¸ÙˆØ§Ù‡Ø±","Ø¸Ù„Ø§Ù„Ùƒ","Ø¸Ù†ÙˆÙ†Ùƒ","Ø¸Ø±ÙŠÙØ©","Ø¸Ù‡ÙˆØ±Ùƒ","Ø¸Ù„Ù…Ø§Øª","Ø¸Ù‡ÙŠØ±Ù‡","Ø¸ÙØ§Ø¦Ø±",
  "Ø¹ÙˆØ§Ù…Ù„","Ø¹Ù‚Ø§Ø±Ø¨","Ø¹Ù†Ø§ØµØ±","Ø¹Ù†Ø§ÙŠØ©","Ø¹ÙˆØ§Ø·Ù","Ø¹Ø§Ø¯ØªÙƒ","Ø¹Ù‚Ø§Ø¦Ø¯","Ø¹ÙˆØ§ØµÙ","Ø¹Ø²Ø§Ø¦Ù…","Ø¹Ø°ÙˆØ¨Ø©",
  "ØºÙ†Ø§Ø¦Ù…","ØºØ±Ø§Ù…Ø©","ØºØ·Ø§ÙŠØ§","ØºÙˆØ§ÙŠØ©","ØºÙ†ÙŠÙ…Ø©","ØºÙ„Ø§ÙÙƒ","ØºØ³Ø§Ù„Ø©","ØºÙ…ÙˆØ¶Ùƒ","ØºØ±Ø§Ø¦Ø¨","ØºØ±ÙØªÙƒ",
  "ÙØ§Ø¦Ø¯Ø©","ÙØ¶Ø§Ø¦Ù„","ÙÙ„Ø§ØªØ±","ÙØµÙˆÙ„Ùƒ","ÙÙˆØ§ÙƒÙ‡","ÙØ±Ø§Ø´Ø©","ÙØ±ÙŠÙ‚Ùƒ","ÙÙƒØ§Ù‡Ø©","ÙÙˆØªØ±Ø©","ÙØµØ§Ø¦Ù„",
  "Ù‚Ø§Ø¦Ù…Ø©","Ù‚Ø¨Ø§Ø¦Ù„","Ù‚Ø¯ÙˆØ§Øª","Ù‚ÙˆØ§ÙÙ„","Ù‚Ø¯Ø±Ø§Øª","Ù‚ØµØ§Ø¦Ø¯","Ù‚ÙˆØ§Ø³Ù…","Ù‚Ø±Ø§Ø¡Ø©","Ù‚ØµØµÙŠØ©",
  "ÙƒØ±Ø§Ù…Ø©","ÙƒÙˆØ§ÙƒØ¨","ÙƒØ±Ø§Ø³Ø©","ÙƒÙØ§Ù„Ø©","ÙƒÙ„Ù…Ø§Øª","ÙƒØªÙŠØ¨Ø©","ÙƒÙÙˆÙÙƒ","ÙƒÙØ§Ø¡Ø©","ÙƒØªØ§Ø¦Ø¨","ÙƒÙ†ÙŠØ³Ø©",
  "Ù„ÙˆØ­Ø§Øª","Ù„ÙˆØ§Ø­Ù‚","Ù„ÙˆØ§Ø²Ù…","Ù„Ø°Ø§Ø¦Ø°","Ù„Ù…Ø­Ø§Øª","Ù„Ø­Ø¸Ø§Øª",
  "Ù…Ø³Ø§Ø¹Ø¯","Ù…ÙƒØªØ¨Ø©","Ù…Ø¯Ø§Ø±Ø³","Ù…Ø±Ø§Ø³Ù…","Ù…Ù†Ø§Ø²Ù„","Ù…Ø´Ø§Ø¹Ø±","Ù…ÙØ§ØªÙŠØ­","Ù…Ø±Ø§Ø­Ù„","Ù…Ù…Ø§Ù„Ùƒ","Ù…ÙˆØ§Ø³Ù…",
  "Ù†Ù…Ø§Ø°Ø¬","Ù†Ø¬Ø§Ø­Ùƒ","Ù†ÙˆØ§Ø­ÙŠ","Ù†Ù‚Ø§Ø´Ùƒ","Ù†Ù‡Ø§Ø¦ÙŠØ©","Ù†ÙØ§ÙŠØ§Øª","Ù†Ø¬ÙˆÙ…Ùƒ","Ù†Ø´Ø§Ø·Ùƒ",
  "Ù‡Ø¯Ø§ÙŠØ§","Ù‡ØªØ§ÙØ©","Ù‡ÙˆØ§Ø¬Ø±","Ù‡ÙˆØ§ÙŠØ©","Ù‡ÙˆØ§Ø¬Ø³","Ù‡Ø¶Ø§Ø¨Ùƒ","Ù‡Ø¯Ø§ÙˆÙ‡","Ø¬ÙˆØ§Ù‡Ø±",
  "ÙˆØ«Ø§Ø¦Ù‚","ÙˆØ±Ù‚Ø§Øª","ÙˆØ±Ø§Ø«Ø©","ÙˆØ¬Ø¨Ø§Øª","ÙˆØ¸Ø§Ø¦Ù","ÙˆÙ„Ø§Ø¯Ø©","ÙˆÙ‚Ø§Ø¦Ø¹","ÙˆØ³Ø§Ø¦Ù„","ÙˆØ­Ø¯Ø§Øª","ÙˆØ¬ÙˆÙ‡Ùƒ",
  "ÙŠÙ‚Ø¸ØªÙƒ","ÙŠÙ‚ÙŠÙ†Ùƒ","ÙŠÙ…Ù†ÙŠØ©","ÙŠÙ…Ø§Ù…Ø©","ÙŠÙ…Ù†Ø§Ùƒ","ÙŠÙ‚Ø¸Ø§Ù†","ÙŠÙˆØ³ÙÙŠ"
];


let words = [];
let currentWordIndex = 0;
let currentRow = 0;
let currentGuess = "";
let isLocked = false;
let savedGuesses = [[], [], []];

const grid = document.getElementById("grid");
const messageBox = document.getElementById("messageBox");
const correctAnswerBox = document.getElementById("correctAnswer");
const summary = document.getElementById("summary");

function seedRandom(seed) {
  let x = Math.sin(seed) * 10000;
  return x - Math.floor(x);
}
function pickWordsBySeed(seed) {
  const chosen = new Set();
  while (chosen.size < 3) {
    const index = Math.floor(seedRandom(seed + chosen.size) * sixLetterWords.length);
    const word = sixLetterWords[index];
    if (word && word.length === 5) chosen.add(word);
  }
  return Array.from(chosen);
}
function saveState() {
  const state = {
    currentWordIndex,
    currentRow,
    currentGuess,
    isLocked,
    savedGuesses,
    correctHTML: correctAnswerBox.innerHTML,
    date: new Date().toISOString().slice(0,10)
  };
  localStorage.setItem("khmasiyatState", JSON.stringify(state));
}
function loadState() {
  const data = localStorage.getItem("khmasiyatState");
  if (data) {
    const state = JSON.parse(data);
    const today = new Date().toISOString().slice(0,10);
    if (state.date === today) {
      currentWordIndex = state.currentWordIndex;
      currentRow = state.currentRow;
      currentGuess = state.currentGuess;
      isLocked = state.isLocked;
      savedGuesses = state.savedGuesses || [[],[],[]];
      correctAnswerBox.innerHTML = state.correctHTML || "";
      return true;
    }
  }
  return false;
}
function initGame() {
  const today = new Date().toISOString().slice(0,10);
  const seed = parseInt(today.replace(/-/g,''));
  words = pickWordsBySeed(seed);
  if (loadState()) {
    createGrid();
    createKeyboard();
    savedGuesses[currentWordIndex].forEach((g, i) => {
      currentRow = i;
      currentGuess = g.guess;
      renderGuess(g.result);
      updateKeyboardColors(g.guess, g.result);
    });
    currentGuess = "";
    if (isLocked) showSummary();
  } else {
    createGrid();
    createKeyboard();
  }
}
function createGrid() {
  grid.innerHTML = "";
  for (let i=0; i<8; i++) {
    for (let j=0; j<5; j++) {
      const cell = document.createElement("div");
      cell.classList.add("cell");
      cell.id = `cell-${currentWordIndex}-${i}-${j}`;
      grid.appendChild(cell);
    }
  }
}
function createKeyboard() {
  const rows = ["Ø§Ø£Ø¨ØªØ«Ø¬Ø­Ø®Ø¯Ø°Ø±Ø²Ø³Ø´ØµØ¶Ø·Ø¸Ø¹ØºÙÙ‚ÙƒÙ„Ù…Ù†Ù‡ÙˆÙŠ","Ø¡Ø¤Ø¦Ù‰Ø¢Ø¥Ø©Ù‰"];
  rows.forEach((row,idx)=>{
    const rowDiv=document.getElementById(`row${idx+1}`);
    rowDiv.innerHTML="";
    row.split("").forEach(k=>{
      const key=document.createElement("div");
      key.classList.add("key");
      key.textContent=k;
      key.onclick=()=>handleKey(k);
      rowDiv.appendChild(key);
    });
  });
}
function handleKey(k) {
  if (isLocked || currentGuess.length >= 5) return;
  currentGuess += k;
  updateGrid();
  saveState();
}
function handleBackspace() {
  if (isLocked || currentGuess.length === 0) return;
  currentGuess = currentGuess.slice(0, -1);
  updateGrid();
  saveState();
}
function handleEnter() {
  if (isLocked || currentGuess.length < 5) return;
  const correct = words[currentWordIndex];
  const result = Array(5).fill("absent");
  for (let i=0; i<5; i++) {
    if (currentGuess[i] === correct[i]) result[i]="correct";
    else if (correct.includes(currentGuess[i])) result[i]="present";
  }
  renderGuess(result);
  updateKeyboardColors(currentGuess, result);
  savedGuesses[currentWordIndex].push({guess:currentGuess, result});
  if (currentGuess === correct) {
    correctAnswerBox.innerHTML += `âœ… Ø§Ù„ÙƒÙ„Ù…Ø© ${currentWordIndex+1}: ${correct}<br>`;
    currentWordIndex++;
    if (currentWordIndex >=3) {isLocked=true;showSummary();}
    else {resetForNextWord();}
  } else {
    currentRow++;
    if (currentRow >=8) {
      correctAnswerBox.innerHTML += `âŒ Ø§Ù„ÙƒÙ„Ù…Ø© ${currentWordIndex+1}: ${correct}<br>`;
      currentWordIndex++;
      if (currentWordIndex >=3) {isLocked=true;showSummary();}
      else {resetForNextWord();}
    }
  }
  currentGuess="";
  saveState();
}
function updateKeyboardColors(guess, result) {
  for (let i = 0; i < 5; i++) {
    const letter = guess[i];
    const keys = document.querySelectorAll(".key");
    keys.forEach(key => {
      if (key.textContent === letter) {
        if (result[i] === "correct") {
          key.classList.remove("present", "absent");
          key.classList.add("correct");
        } else if (result[i] === "present" && !key.classList.contains("correct")) {
          key.classList.remove("absent");
          key.classList.add("present");
        } else if (!key.classList.contains("correct") && !key.classList.contains("present")) {
          key.classList.add("absent");
        }
      }
    });
  }
}
function resetKeyboardColors() {
  const keys=document.querySelectorAll(".key");
  keys.forEach(key=>{
    key.classList.remove("correct","present","absent");
  });
}
function renderGuess(result) {
  for (let j=0; j<5; j++) {
    const cell=document.getElementById(`cell-${currentWordIndex}-${currentRow}-${j}`);
    cell.textContent=currentGuess[j];
    cell.classList.add(result[j]);
  }
}
function updateGrid() {
  for (let i=0; i<5; i++) {
    const cell=document.getElementById(`cell-${currentWordIndex}-${currentRow}-${i}`);
    if (cell) cell.textContent=currentGuess[i]||"";
  }
}
function resetForNextWord() {
  currentRow=0;
  currentGuess="";
  createGrid();
  resetKeyboardColors();
  saveState();
}
function showSummary() {
  summary.innerHTML="<h2>â­ Ù…Ù„Ø®Øµ Ù…Ø­Ø§ÙˆÙ„Ø§ØªÙƒ:</h2>";
  for (let w=0;w<3;w++) {
    const gridDiv=document.createElement("div");
    gridDiv.className="summary-grid";
    for (let r=0;r<8;r++) {
      const guessObj=savedGuesses[w][r];
      for (let c=0;c<5;c++) {
        const cell=document.createElement("div");
        cell.className="summary-cell";
        if (guessObj){cell.textContent=guessObj.guess[c];cell.classList.add(guessObj.result[c]);}
        gridDiv.appendChild(cell);
      }
    }
    summary.appendChild(gridDiv);
  }
}
window.onload=initGame;
</script>
</body>
</html>
